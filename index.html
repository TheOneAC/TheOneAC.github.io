<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="7989000bfd4e43ea" />










  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Algorithm Git C++" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="生如逆旅  一苇可航">
<meta property="og:type" content="website">
<meta property="og:title" content="TheOneAC">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="TheOneAC">
<meta property="og:description" content="生如逆旅  一苇可航">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TheOneAC">
<meta name="twitter:description" content="生如逆旅  一苇可航">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> TheOneAC </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">TheOneAC</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">init</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/27/Mysql/" itemprop="url">
                  Mysql
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-27T03:24:10+08:00" content="2016-08-27">
              2016-08-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>管理用户：<br>USE mysql；<br>SELECT user FROM user；</li>
<li>创建账户：<br>CTEATE USER name IDENTIFIED BY ‘PASSWAORD’；</li>
<li>删除用户 DROP USER name；</li>
<li>设置权限：<br>SHOW GRANTS FOR name；</li>
<li>修改权限：<br>GRANT SELECT ON …. TO username；</li>
</ul>
<hr>
<ul>
<li>sql语句创建库:<br>SOURCE 绝对路径+文件名；<br>SHOW columns FROM tablename；<br>SHOW STATUS;<br>SHOW GRANTS;<br>SHOW CREATE TABLES;<br>SHOW ERRORS;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">SELECT </div><div class="line">    column_1, column_2, ...</div><div class="line">FROM</div><div class="line">    table_1</div><div class="line">[INNER | LEFT |RIGHT] JOIN table_2 ON conditions</div><div class="line">WHERE</div><div class="line">    conditions</div><div class="line">GROUP BY column_1</div><div class="line">HAVING group_conditions</div><div class="line">ORDER BY column_1</div><div class="line">LIMIT offset, length;</div></pre></td></tr></table></figure>
<p><strong>INNER JOIN</strong><br><img src="http://www.mysqltutorial.org/wp-content/uploads/2011/05/mysql-inner-join-Venn-Diagram.png" alt="inner join"></p>
<ul>
<li>SELECT column FROM tablename LIMIT num1，num2；<br>输出从num1行开始的num2行</li>
</ul>
<blockquote>
<p><strong>BETWEEN AND 两值之间<br>[NOT] IN(范围) 制定范围之间<br>LIKE 字符匹配</strong></p>
</blockquote>
<ul>
<li><p>MYSQL REGEXP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">|       或</div><div class="line">[ a-z ]     范围所有小写字母</div><div class="line">.       任意字符</div><div class="line">\\      转义</div><div class="line">[: :]       匹配字符类</div></pre></td></tr></table></figure>
</li>
<li><p>重复前字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">\*      0或多个匹配</div><div class="line">\+      1或多个匹配</div><div class="line">？       0或1个匹配</div><div class="line">&#123;n&#125;     指定数目匹配</div><div class="line">&#123;n，&#125;     不少于制定数目匹配</div><div class="line">&#123;n,m&#125;    匹配数目不超过m</div></pre></td></tr></table></figure>
</li>
<li><p>定位符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">^        文本开始</div><div class="line">$       文本结尾</div><div class="line">[[:&lt;:]]     词开始</div><div class="line">[[:&gt;:]]     词结束</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>LIKE 匹配整串 REGEXP 匹配子串</strong><br>mysq以concat()实现拼接，一般sql可以用+或者||实现</p>
<ul>
<li>文本函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">rtrim()     去掉数值右侧空格</div><div class="line">Left()         返回串左边字符</div><div class="line">Length()       返回串长度</div><div class="line">Locate()       找出串中一个子串</div><div class="line">Lower()     转换为小写</div><div class="line">Ltrim()     去除左边空字符</div><div class="line">Rtrim()     去除右边空字符</div><div class="line">Right()     返回串右边字符</div><div class="line">Soundex()     发音相似</div><div class="line">Substring() 返回子串</div><div class="line">Upper()     转换为大写</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">0. DISTINCT  只能用于COUNT(),不能用于COUNT(*)</div><div class="line">1. GROUP BY 子句嵌套分组时，数据将在最后规定的分组进行汇总</div><div class="line">2. HAVING 过滤分组子句</div><div class="line">3. WHERE 在数据分组前进行过滤，HAVING 在数据分组后过滤</div></pre></td></tr></table></figure>
<p>等值连接即内连接INNER JOIN  ON 子句筛选<br>自链接，使用表别名防止链接错误</p>
<ul>
<li><p>全文匹配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">FULLTEXT（tablename）:为该列建立索引</div><div class="line">MATCH（指定搜索列）AGAINST（搜索文本）[WITH QUERY EXPANSION]/查询扩展</div><div class="line">FULLTEX与MATCH参数必须一致</div><div class="line">全文匹配自动排序，相似度高的先输出</div><div class="line">扩展查询：两次索引查询，第一次查询相似词，第二次用相似词查询并返回结果</div></pre></td></tr></table></figure>
</li>
<li><p>IN BINARY MODE</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">\+  包含，词必须存在</div><div class="line">—   排除，词不出现</div><div class="line">\&gt;  包含，增加等级</div><div class="line">&lt;   包含，减少等级</div><div class="line">()      词组排列组合</div><div class="line">~   取消一个词的排序值</div><div class="line">\*  词尾通配符</div><div class="line">&quot;&quot;  定义为一个短语</div></pre></td></tr></table></figure>
</li>
<li><p>引擎类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ENGINE=[]</div><div class="line">InnoDB  事务处理，不支持全文搜索</div><div class="line">MEMORY  快速MyISAM，内存存储，速度快</div><div class="line">MyISAM  支持全文搜索不支持事务处理</div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><strong>外键不能跨引擎</strong></li>
<li><strong>在视图定义中有如下操作不能更新:分组、链接、子查询、并、、聚集函数，distinct</strong></li>
</ol>
<ul>
<li><p>创建存储过程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CREATE PROCEDURE procedurename(参数)</div><div class="line">BEGIN</div><div class="line">.........;</div><div class="line">END;</div></pre></td></tr></table></figure>
</li>
<li><p>调用存储过程：CALL preocedurename（@p1，@p2，@p3）；<br><em>参数变量以@开头</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">\* 备份前FLUSH TABLES;             刷新</div><div class="line">\* 备份：mysqldump                  转储所有内文件到外部文件</div><div class="line">\* mysqlhotcopy                      复制数据库</div><div class="line">\* BACKUP TABLE /SELECT INTOOUTFILE  转储到外部文件</div></pre></td></tr></table></figure>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SHOW CHARACTER SET；         显示字符集</div><div class="line">SHOW COLLATION；             显示校对</div><div class="line">ANALYZE TABLE tablename；       分析表状态</div><div class="line">CHECK TABLE tabkename；       检查表状态</div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/27/sqlite/" itemprop="url">
                  sqlite
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-27T03:23:53+08:00" content="2016-08-27">
              2016-08-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="sqlite"><a href="#sqlite" class="headerlink" title="sqlite"></a>sqlite</h2><p>格式化输出</p>
<blockquote>
<p>.heade on<br>.mode column</p>
</blockquote>
<p>LIKE</p>
<blockquote>
<p>% 任意多个字符 LIKE ‘XX*’;<br>_ 唯一一个字符 LIKE ‘_X’;</p>
</blockquote>
<p>GLOB</p>
<blockquote>
<p>* 任意字符<br>? 单一数字或者字符</p>
</blockquote>
<p>LIMIT</p>
<blockquote>
<p>LIMIT n<br>从开始到n项<br>LIMIT n OFFSET m;<br>以 n项为中心,m正向下m项,m负向上m项</p>
</blockquote>
<p><code>SELECT   [] FROM [table.name] ORDER BY [column] ASC|DESC;</code><br><strong>SELECT 语句中，GROUP BY 子句放在 WHERE 子句之后，放在 ORDER BY 子句之前</strong><br>聚集函数</p>
<blockquote>
<p>COUNT(DISTINCT|ALL&lt;列名&gt;);<br>SUM(DISTINCT|ALL&lt;列名&gt;);<br>AVG(DISTINCT|ALL&lt;列名&gt;);<br>MAX/MIN(DISTINCT|ALL&lt;列名&gt;);</p>
</blockquote>
<p>HAVING   [condition]<br><strong>HAVING 子句必须放在 GROUP BY 子句之后，必须放在 ORDER BY 子句之前</strong><br>DISTINCT </p>
<blockquote>
<p>SELECT DISTINCT [] FROM<br>与 SELECT 语句一起使用，来消除所有重复的记录</p>
</blockquote>
<p>链接实现:<br>1、nested-loop<br>2、排序合并：子表排序后顺序查找</p>
<p>sqlite约束:</p>
<blockquote>
<p>NOT NULL<br>DEDFAULT:创建表格时设置默认值<br>UNIQUE<br>PRIMMARY KET<br>CHECK:输入值时check,false则输入无效<br>    example:SALARY     REAL   CHECK(SALARY&gt; 0);</p>
</blockquote>
<p><strong>重命名列,删除列,删除约束在sqlite不可实现</strong></p>
<h4 id="sqlite-joins"><a href="#sqlite-joins" class="headerlink" title="sqlite joins"></a>sqlite joins</h4><p>CROSS JOIN</p>
<blockquote>
<ul>
<li>SELECT COLUMN1,…COLUMN2 FROM TABLE1 CROSS JOIN TABLE2<br>INNER JOIN</li>
<li>SELECT COLUMN,…COLUMNn FROM TABLE1 JOIN TABLE2 USING COLUMN1…COLUMNn;</li>
<li>SELECT COLUMN,…COLUMNn FROM TABLE1 INNER JOIN TABLE2 ON condition;</li>
<li>SELECT COLUMN,…COLUMNn FROM TABLE1 NATURE JOIN TABLE2 COLUMN1 … COLUMNn;</li>
<li>OUTER JOIN:LEFT OUTER JOIN\ RIGTH OUTER JOIN\ FULL OUTER JOIN</li>
<li>SELECT…..FROM table1 [ ] OUTER JOIN table2 ON condition/ USING column….</li>
</ul>
</blockquote>
<hr>
<p>UNION  </p>
<blockquote>
<p>每个 SELECT 被选择的列数必须是相同的，相同数目的列表达式，相同的数据类型，并确保它们有相同的顺序，但它们不必具有相同的长度。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">SELECT .... FROM TABLE1....WHERE .....</div><div class="line">UNION</div><div class="line">SELECT .... FROM TABLE2....WHERE .....</div><div class="line">//UNION 去重，UNION ALL 不去重</div></pre></td></tr></table></figure></p>
</blockquote>
<p>Alias<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">table：</div><div class="line">SELECT  aliase_name.column... </div><div class="line">FROM  table.name AS aliase_name</div><div class="line">WHERE [condition];</div><div class="line">column:</div><div class="line">SELECT column_name AS alias_name</div><div class="line">FROM table_name;</div><div class="line">WHERE [condition]；</div></pre></td></tr></table></figure></p>
<p>TRIIGGER<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CREATE TRIGGER tiggername [AFTER/BEFORE] [action] ON tablename</div><div class="line">BEGIN</div><div class="line">.....</div><div class="line">END;</div></pre></td></tr></table></figure></p>
<ul>
<li>显示触发器：<br>SELECT name FROM SQLITE——master<br>WHERE type=’trigger’;</li>
<li>删除触发器：<br>DROP TRIGGER triggername；</li>
<li>INDEX:<br>CREAT [UNIQUE] INDEX indwx_name  ON table_name(column1,column);</li>
<li>显示单表中index：<br>.indices table</li>
<li>显示全部：<br>SELECT * FROM sqlite_master WHERE type = ‘index’;</li>
<li>DROP INDEX index_name;<br>索引不应该使用在较小的表上。<br>索引不应该使用在有频繁的大批量的更新或插入操作的表上。<br>索引不应该使用在含有大量的 NULL 值的列上。<br>索引不应该使用在频繁操作的列上。</li>
<li><p>ALERT<br>ALTER TABLE tablename RENAME TO new_tablename<br>ALERT TABLE databasename.tablename ADD COLUMN columnname def….. </p>
</li>
<li><p>VIEW<br>CREATE [TEMPORY|TEMP]VIEW viewname AS<br>SELECT column1 column2….<br>FROM tablename<br>WHERE [condition];<br>SELECT * FROM viewname;<br>DROP VIEW viewname;</p>
</li>
<li><p>TRANSICTION</p>
<blockquote>
<p>原子性（Atomicity）：确保工作单位内的所有操作都成功完成，否则，事务会在出现故障时终止，之前的操作也会回滚到以前的状态。<br>一致性（Consistency)：确保数据库在成功提交的事务上正确地改变状态。<br>隔离性（Isolation）：使事务操作相互独立和透明。<br>持久性（Durability）：确保已提交事务的结果或效果在系统发生故障的情况下仍然存在。</p>
</blockquote>
</li>
</ul>
<p><code>BEGIN;/BEGIN TRANSACTION;
ROLLBACK/COMMIT;</code></p>
<ul>
<li>VACUUM<br>VACUUM 命令通过复制主数据库中的内容到一个临时数据库文件，然后清空主数据库，并从副本中重新载入原始的数据库文件。这消除了空闲页，把表中的数据排列为连续的，另外会清理数据库文件结构<br>VACUUM 命令只适用于主数据库，附加的数据库文件是不可能使用 VACUUM 命令。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sqlite&gt; PRAGMA auto_vacuum = NONE;  -- 0 means disable auto vacuum</div><div class="line">sqlite&gt; PRAGMA auto_vacuum = INCREMENTAL;  -- 1 means enable incremental vacuum</div><div class="line">sqlite&gt; PRAGMA auto_vacuum = FULL;  -- 2 means enable full auto vacuum</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/27/程序员的自我修养/" itemprop="url">
                  程序员的自我修养
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-27T03:23:39+08:00" content="2016-08-27">
              2016-08-27
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>ELF文件格式与windows PE/COFF章节未做细致分析</li>
</ul>
<h4 id="review"><a href="#review" class="headerlink" title="review"></a>review</h4><p>操作系统：硬件资源管理，抽象接口<br>同一个系统：页大小固定<br>fork并不复制原任务内存空间，而是和原任务共享一个<code>写时复制</code>的内存空间<br>写时复制：两个任务可同事自由读取内存，任意任务视图修改时，复制一份原内存内容给修改方，以免影响其他任务。<br>i++；汇编变为三个指令，非原子操作，会被多线程打断。<br>读写锁：自由态  共享/独占均可，共享态  共享成功/独占失败 ，独占态  共享失败/独占成功<br>volatile：直接存取原始内存地址<br>（两者均可能造成线程执行顺序错误）<br>1、阻止编译器为了提高速度将一个变量缓存到寄存器而不写回；<br>2、阻止编译器调整操作volatile变量的顺序<br>barrier指令：阻止编译器将barrier之前的指令换到barrier之后</p>
<h4 id="compile-and-link"><a href="#compile-and-link" class="headerlink" title="compile and link"></a>compile and link</h4><p>预编译 gcc -E<br>以“#”开头语句被处理，宏展开，注释清楚，<br>保留#prama给编译器，插入行号和文件名表示用于编译错误提醒<br>编译 gcc -S<br>生成汇编代码<br>gcc   根据不同参数，调用预编译程序，汇编器，链接器<br>汇编<br>as/gcc -c<br>链接：地址空间分配，符号决议（绑定），重定位<br>编译时不能确定地址，链接时确定和修改地址：重定位</p>
<h5 id="object-file"><a href="#object-file" class="headerlink" title="object file"></a>object file</h5><p>目标文件、动态链接库、静态链接库、可执行文件均按照可执行文件格式存储，linux中为ELF<br>ELF文件分类<br>1、可重定位文件relocatable file   linux.o<br>2、可执行文件 executable file     windows.exe<br>3、共享目标文件shared object file linux.so windows.dll<br>4、核心转储文件 coredump file     linux.core dump(意外终止进程文件内容与信息)<br>c语言编译后文件：<br>.text  执行语句<br>.data  以初始化的全局变量和局部静态变量<br>.bss   未初始化的全局变量和局部静态变量</p>
<p>objdump -x -s -d name.o<br>文件name.o内容显示格式：<br>.字段名   十六进制存储标识      汇编语言</p>
<p>自定义段存储位置<br><strong>attribute</strong>((section(“name”))) int var=value;<br>将var放置在name段中<br>readlf -h name.o显示ELF文件</p>
<h4 id="static-link"><a href="#static-link" class="headerlink" title="static link"></a>static link</h4><p>链接器为目标文件分配地址和空间：<br>1、分配输出文件空间<br>2、完整装载厚厚的地址定位，即形成程序虚拟地址<br>two-passing link<br>1、空间域地址分配：文件、符号合并，建立映射关系<br>2、符号解析与重定位：调整代码中地址为虚拟地址<br>可重定位文件中，每一个可重定位ELF段赌赢一个重定位表<br>objdump  -r name.o   查看name.o的重定位表<br>重定位过程中：每个重定位入口都是对一个符号的引用<br>readelf -s name.o    查看name.o的符号表<br>重定位方式：<br>R_386_32    1           绝对寻址修正S+A<br>R_386_PC32  2           相对寻址修正S+A-P<br>A=保存在被修正位置的值<br>P=被修正的位置（相对于断开始的偏移量或者虚拟地址）<br>S=符号实际地址r_info（重定位表）确定的符号的实际地址</p>
<p>弱符号的COMMON块机制<br>原因：编译器允许不同类型的弱符号存在，本质时链接器部支持符号类型，即无法判断符号类型是否一致<br>弱符号：未初始化的全局变量定义<br>两个弱符号以大的为准<br>一强一弱以强为准，若果若大小大于强，报错<br>gcc -fno-common/int global <strong>atttribute</strong>((nocommon))<br>定义未初始化全局变量nocommon不以COMMON块形式处理<br>一个为初始化的全局变量不以COMMON块形式存在，就相当于一个强符号，如果其他目标文件还存在同一个变量的强符号定义，连接时发生符号重定义<br>c++中编译问题<br>1、重复代码<br>模板在不同文件被相同类型实例化造成代码重复<br>解决方案：将每个模板的市里代码单独放置在一个段里，每个段只把含有一个模板实例<br>有虚函数的类有一个虚函数表，在不同编译单元生虚函数表造成代码重复，外部内联函数、默认构造函数、默认拷贝函数、赋值操作和虚函数表做法类似<br>函数级别链接：每个函数单独成段，单独链接一个函数段，链接时必须明确函数依赖关系<br>全局构造与析构<br>c++的全局构造函数在mian函数之前执行，析构函数在main之后执行<br>linux中程序入口为_start,这个函数就是程序初始化入口，初始化完成后调用main函数主体，main完整后返回到初始化部分，清理现场，结束进程<br>ABI：可执行二进制兼容性相关内容（符号修饰标准，变量内存布局，函数调用方式等）二进制层面接口<br>静态库：一组目标文件object的集合</p>
<h4 id="execute-file-loading-and-process"><a href="#execute-file-loading-and-process" class="headerlink" title="execute file loading and process"></a>execute file loading and process</h4><p>装载：程序局部性，覆盖装入overlay、页映射paging<br>进程的建立<br>1、创建独立虚拟地址空间\<br>2、读取可执行文件头，建立虚拟空间与可执行文件的映射关系<br>    &amp; 虚拟空间发生页错误时定位可执行文件位置<br>3、CPU指令寄存器设置成可执行文件入口地址<br>    &amp;涉及用户态与内核态转换<br>进程虚拟地址空间VMA：<br>代码VMA：只读，可执行<br>数据VMA：可读可写可执行<br>堆VMA：  可读写可执行<br>栈VMA：  可读写不可执行</p>
<h4 id="dynamic-link"><a href="#dynamic-link" class="headerlink" title="dynamic link"></a>dynamic link</h4><p>gcc -fPIC -shared -o lib.s0 lib.c   生成动态库<br>静态共享库 ：操作系统划分固定空间存储静态库模块<br>动态共享库：共享对象编译时不明却自己的进程虚拟地址空间中的位置<br>PIC地址无关代码：<br>模块内部调用与跳转：相对寻址<br>模块内数据访问：相对寻址<br>模块间数据访问：全局偏移表，标记偏移位置<br>模块见调用域跳转：全局偏移表保存目标函数位置<br>延迟绑定：函数第一次调用时绑定<br>/lib  关键基础共享库<br>/usr/lib 开发共享库<br>/usr/local/lib 三方应用库</p>
<h4 id="memory"><a href="#memory" class="headerlink" title="memory"></a>memory</h4><p>内核空间，栈向下延伸，动态链接库在堆栈中间，堆向上延伸，读写部分（.data .bss）,只读部分(.init .text .rodata)装载起始位置0x08048000,之下为reserved<br>segment fault:指针非法,读写不可读写空间,指针未初始化或者初始化为NULL就使用指针<br>堆栈帧:储存函数返回地址与参数,临时变量,函数调用前后不便的寄存器(上下文)<br>esp指向栈顶,ebp指向活动栈帧,又称为帧指针<br>ebp函数返回位置<br>调用惯例calling conversion<br>函数参数传递顺序域方式:压栈传递参数.函数调用方压栈,函数本身弹栈取值<br>c语言调用惯例:从右至左压栈参数<br>返回值传递:使用临时栈上存储区作为中转,两次copy,一次存入栈上tmp,一次存回返回区</p>
<p>堆空间由运行库管理<br>mmap申请匿名空间实现malloc<br>堆分配算法:空闲链表\位图\对象池</p>
<p><strong>MINI CRT的实现</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/12/Effective-c++/" itemprop="url">
                  Effective c++.md
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-12T12:27:36+08:00" content="2016-08-12">
              2016-08-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Effective-C/" itemprop="url" rel="index">
                    <span itemprop="name">Effective C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Specification </strong></p>
<blockquote>
<ul>
<li><strong>Template and generic programing not marked(40-47)</strong></li>
<li><strong>Design and implememt  need more code experience  to understand </strong></li>
<li><strong>Effective c++ need read more than one times </strong></li>
<li><strong>Learning by code</strong></li>
</ul>
</blockquote>
<h4 id="Item1-default-constructor"><a href="#Item1-default-constructor" class="headerlink" title="Item1 default constructor:"></a>Item1 default constructor:</h4><blockquote>
<p>called with no arguments<br> has no parameter or default value for every parameter.<br> default constructer should be ‘explicit’ to avoid ‘implicit type conversion’<br> ‘copy instructor’:initialize an object with a different objrect of the same type.<br> ‘copy assignment operator’: copy the value from one object to another of the same type.<br> ‘object passed by value’ in the way of ‘copy construtor’</p>
</blockquote>
<p><strong>Rules for effective c++ programming vary,depending on the part of c++ you are using :C OOP Template STL</strong></p>
<h4 id="Item2-Prefer-const-enum-and-inline-to-define"><a href="#Item2-Prefer-const-enum-and-inline-to-define" class="headerlink" title="Item2 Prefer const ,enum,and inline to #define"></a>Item2 Prefer const ,enum,and inline to #define</h4><blockquote>
<p>const not many copy like #define and can be private.<br> enum can be referenced but #define cann`t<br> For simple constants ,prefer const objects to #define<br> For function-like macros, prefer inline function to #define.</p>
</blockquote>
<h4 id="Item3-Use-const-whenever-possible"><a href="#Item3-Use-const-whenever-possible" class="headerlink" title="Item3 Use const  whenever possible"></a>Item3 Use const  whenever possible</h4><blockquote>
<p>whenever it`s true ,to do so -const.<br> for pointer ,you can specify whether the pointer itself is const ,the data it point to is const,both or neither.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">char *p = greeting;// non-const pointer,</div><div class="line">                   // non-const data</div><div class="line">const char *p = greeting;// non-const pointer,</div><div class="line">                         // const data</div><div class="line">char * const p = greeting;// const pointer,</div><div class="line">                          // non-const data</div><div class="line">const char * const p = greeting;// const pointer,</div><div class="line">                                // const data</div></pre></td></tr></table></figure></p>
<p>for iterator , <strong>const</strong> iterator is the iterator itself is const , but <strong>const_iterator</strong> , the object it point to ia const<br> const member function  make it possible to work with const object.<br>  return in c++ is return a copy of the parameter not itself,which invoked a copy constructor</p>
</blockquote>
<p><code>Declaring  something const helps complier
detect usage errors and can be applied to objects at any scope.
$ compiler enforce bitwise constness but you should program using logical constness.
$ when const and non-const member function have essentialy identical implementions, code duplication can be avoided by having the non-const version call the const version.</code></p>
<h4 id="Item4-Make-sure-object-initialized-before-used"><a href="#Item4-Make-sure-object-initialized-before-used" class="headerlink" title="Item4 Make sure object initialized before used"></a>Item4 Make sure object initialized before used</h4><blockquote>
<p>make sure that all construtors initialize everything in ht eobject.<br>data members that are const or are reference must be initialzied and can not be assignment.</p>
</blockquote>
<h3 id="construtor-Destructor-and-assignmentOperation"><a href="#construtor-Destructor-and-assignmentOperation" class="headerlink" title="construtor  Destructor and assignmentOperation"></a>construtor  Destructor and assignmentOperation</h3><h4 id="Item5-know-what-function-c-silently-writes-and-calls"><a href="#Item5-know-what-function-c-silently-writes-and-calls" class="headerlink" title="Item5: know what function c++ silently writes and calls"></a>Item5: know what function c++ silently writes and calls</h4><h4 id="Item6-Explicitly-disallow-the-use-of-compiler-generated-functions-you-do-not-want"><a href="#Item6-Explicitly-disallow-the-use-of-compiler-generated-functions-you-do-not-want" class="headerlink" title="Item6: Explicitly disallow the use of compiler-generated functions you do not want."></a>Item6: Explicitly disallow the use of compiler-generated functions you do not want.</h4><blockquote>
<p>make the function you don`t want be private in the base class.<br>To disallow functionality provided by cpmlilers, declare the corresponding member function ‘private’ and give no imlementations.</p>
</blockquote>
<h4 id="Item7-Declare-destructors-virtual-in-plomorphic-base-classes"><a href="#Item7-Declare-destructors-virtual-in-plomorphic-base-classes" class="headerlink" title="Item7: Declare destructors virtual in plomorphic base classes."></a>Item7: Declare destructors virtual in plomorphic base classes.</h4><blockquote>
<p>Give the base class a virtual destructor then deleting a derived class object will do exactly what you want.<br>a class not intended to be a base class should not have a virtual funtion.</p>
</blockquote>
<h4 id="Item8-Prevent-exception-from-leaving-destructors"><a href="#Item8-Prevent-exception-from-leaving-destructors" class="headerlink" title="Item8: Prevent exception from leaving destructors"></a>Item8: Prevent exception from leaving destructors</h4><ol>
<li>Destructors should never emit exceptions. if functions called in a destructor may throw,the destructor should catch ant exceptions, then swallow them ot terminate the program.</li>
<li>if a class clients need to be able to react to exceptions thrown during an operation, the class should provide a regular function that performs the operation.</li>
</ol>
<h4 id="Item9-Never-call-virtual-function-during-constructor-or-destructor"><a href="#Item9-Never-call-virtual-function-during-constructor-or-destructor" class="headerlink" title="Item9 :Never call virtual function during constructor or destructor"></a>Item9 :Never call virtual function during constructor or destructor</h4><h4 id="Item10-Have-assignment-operators-return-a-reference-to-this"><a href="#Item10-Have-assignment-operators-return-a-reference-to-this" class="headerlink" title="Item10: Have assignment operators return a reference to *this"></a>Item10: Have assignment operators return a reference to *this</h4><blockquote>
<p>‘x=y=z=15, thus x=15,y=15,z=15’<br> the way is implemented is that assignment returns a reference to its left-hand arguement.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class Widget &#123;</div><div class="line">public:</div><div class="line">...</div><div class="line">Widget&amp; operator+=(const Widget&amp; rhs)</div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">    return *this;</div><div class="line">&#125;</div><div class="line">Widget&amp; operator=(int rhs)</div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">    return *this;</div><div class="line">&#125;</div><div class="line">	...</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Item11-Handle-assignment-to-self-in-operator"><a href="#Item11-Handle-assignment-to-self-in-operator" class="headerlink" title="Item11: Handle assignment to self in operator="></a>Item11: Handle assignment to self in operator=</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Widget&amp; Widget::operator=(const Widget&amp; rhs)</div><div class="line">&#123;</div><div class="line">    if (this == &amp;rhs) return *this;</div><div class="line">        // identity test: if a self-assignment,do nothing</div><div class="line">    delete pb;</div><div class="line">    pb = new Bitmap(*rhs.pb);</div><div class="line">    return *this;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>if the ‘new’ failed, pb will pointer to an undefined address.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line">Widget&amp; Widget::operator=(const Widget&amp; rhs)</div><div class="line">&#123;</div><div class="line">    Bitmap *pOrig = pb;          // remember original pb</div><div class="line">    pb = new Bitmap(*rhs.pb); // point pb to a copy of  rhs’s bitmap</div><div class="line">    delete pOrig;               // delete the original pb</div><div class="line">    return *this;</div><div class="line">    //$$$ be careful not to delete pa untill after we`re copied what it point to.</div><div class="line">&#125;</div><div class="line">Widget&amp; Widget::operator=(const Widget&amp; rhs)</div><div class="line">&#123;</div><div class="line">    Widget temp(rhs);// make a copy of rhs’s data</div><div class="line">    swap(temp);      // swap *this’s data with the copy’s</div><div class="line">    return *this;</div><div class="line">&#125;</div><div class="line">Widget&amp; Widget::operator=(Widget rhs)   // rhs is a copy of the object passed in — note pass by val</div><div class="line">&#123;</div><div class="line">    swap(rhs);              // swap *this’s data with</div><div class="line">    return *this;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line">**Make sure any funtion operating on more than one object behave corectly if two or more of the objects are the same.**</div><div class="line"></div><div class="line">#### Item12: COpy all parts of an object</div><div class="line">&gt; for derived class, the copy function should not only copy the data member it defined for itself, but also the data member it inherient from the base class,which will be initialized by the constructor that takes no arguements of the base class.</div><div class="line"> Copy all aparts:</div><div class="line"> $ copy all local data members</div><div class="line"> $ invoke the appropriate copying funtion in the base class.</div><div class="line"> **Don`t try to implement one of the copy constructor funtions in terms of the other &apos;put common funtionality in a third funtion that both call&apos;**</div><div class="line"> </div><div class="line">### Reource Management</div><div class="line">#### Item 13:Use objects to manage resources</div><div class="line">$ put resource inside an object whose destructor will automatically release the resource when control leaves.</div><div class="line">&gt; **Uing Object to Manage Resources**</div><div class="line"> $ resource are acquired and immediately turned over to resource-manageging abjects.</div><div class="line"> $ Resource-managing objects use their destructors to ensure that resource are released.</div><div class="line"> &apos;auto_ptr automaticallt dlete what it point to when the  auto_ptr is destroyed, it`s impotantly that there never be more than one auto_ptr pointing to an object&apos;</div><div class="line">auto_ptr have anusual characteristic: copy it (via copy constructor or copy assignment operator)and set it null.</div><div class="line"> &apos;auto_ptr&lt;type&gt;p2=p1  //p1 pointe to null and p2 pointto the object p1 point to&apos;</div><div class="line"> a reference -counting smart pointer: keep track of how many objects point to aaprticular resource and automaticallt delete the resource when nobady is pointing to it ang longer.</div><div class="line"> **Both auto_ptr and tr1::shared_ptr use delete in their destructors, not delete []. That means that using auto_ptr or tr1::shared_ptr with dynamically allocated arrays is a bad idea**</div><div class="line"> </div><div class="line">#### Item14: Think carefully about copying behavior in resource-managing classes</div><div class="line">&gt; $ Peohabit copying: </div><div class="line">  declare the copt operations private</div><div class="line"> $ Referene-count the underlying resource:</div><div class="line">  use the tr1::shared_ptr. define your deleter function </div><div class="line"> $ Copy the underlying resource:</div><div class="line">  make sure all the copy released when nessary</div><div class="line"> $ Transfer ownership of the underlying resource</div><div class="line">  using auto_ptr </div><div class="line">  </div><div class="line">#### Item15 Provide access to raw resource in resource-managing classes $$$$</div><div class="line">&gt; shared_ptr and auto_ptr both offer a get member function to perform an explicit    conversion :return (a copy of)the raw pointer inside the smart pointer object &apos;.get()&apos;</div><div class="line"> $ APIs often require access to raw resources ,so each RAII class should offer a way to get at  rhe resource it manages.</div><div class="line"></div><div class="line">#### Item16 Use the same form in corresponding *uses* of new and *delete* </div><div class="line">&gt; if you use [] in a new expression, you must use [] in the corresponding delete expression</div><div class="line"></div><div class="line">#### Item17 Store newed objects in smart pointers standalone statements.</div><div class="line">&gt; &apos;processWidget(std::tr1::shared_ptr&lt;Widget&gt;(new Widget), priority());&apos; **not good**</div><div class="line"> &apos;std::tr1::shared_ptr&lt;Widget&gt; pw(new Widget);</div><div class="line">  processWidget(pw, priority());&apos; // **well**</div><div class="line">**Store new ed objects in smart pointers in standalone statements. Failure to do this can lead to subtle resource leaks when exceptions are thrown.**</div><div class="line"></div><div class="line">### Designs ad Declarations</div><div class="line"></div><div class="line">#### Item18 Make interface easy to use correctly and hard to use incorrectly.</div><div class="line">&gt; for your class and struct operation, when in doubts, do as the ints do.</div><div class="line">  tr1::shared_ptr supports custom deleters. This prevents the cross-DLL problem, can be used to automatically unlock mutexes (see Item 14), etc.</div><div class="line"></div><div class="line">#### Treat class design as type design</div><div class="line">&gt;  ■ How should objects of your new type be created and destroyed? </div><div class="line">How this is done influences the design of your class’s</div><div class="line">constructors and destructor, as well as its memory allocation and deallocation functions ( operator new , operator new[] , operator delete ,and operator delete[] — see Chapter 8), if you write them.</div><div class="line">&gt; ■ How should object initialization differ from object assignment? </div><div class="line">The answer to this question determines the behavior of and the differences between your constructors and your assignment operators. It’s important not to confuse initialization with assignment, because they correspond to different function calls (see Item 4).</div><div class="line">&gt; ■ What does it mean for objects of your new type to be passedby value?</div><div class="line"> Remember, the copy constructor defines how pass-by-value is implemented for a type.</div><div class="line">&gt; ■ What are the restrictions on legal values for your new type?</div><div class="line">Usually, only some combinations of values for a class’s data members are valid. Those combinations determine the invariants your class will have to maintain. The invariants determine the errorchecking you’ll have to do inside your member functions, espe-</div><div class="line">cially your constructors, assignment operators, and “setter” functions. It may also affect the exceptions your functions throw and,on the off chance you use them, your functions’ exception specifications.</div><div class="line">&gt; ■ Does your new type fit into an inheritance graph? </div><div class="line">If you inherit from existing classes, you are constrained by the design of those classes, particularly by whether their functions are virtual or nonvirtual (see Items 34 and 36). If you wish to allow other classes to inherit from your class, that affects whether the functions you declare are virtual, especially your destructor (see Item 7).</div><div class="line">&gt;  ■ What kind of type conversions are allowed for your new type?</div><div class="line">Your type exists in a sea of other types, so should there be conversions between your type and other types? If you wish to allow objects of type T1 to be implicitly converted into objects of type T2 ,you will want to write either a type conversion function in class T1(e.g., operator T2 ) or a non- explicit constructor in class T2 that can be called with a single argument. If you wish to allow explicit conversions only, you’ll want to write functions to perform the conversions, but you’ll need to avoid making them type conversion operators or non- explicit constructors that can be called with one argument. (For an example of both implicit and explicit conversion functions, see Item 15.)</div><div class="line">&gt;  ■ What operators and functions make sense for the new type?</div><div class="line">The answer to this question determines which functions you’ll declare for your class. Some functions will be member functions, but</div><div class="line">some will not (see Items 23, 24, and 46).</div><div class="line">&gt;  ■ What standard functions should be disallowed? </div><div class="line">Those are the ones you’ll need to declare private (see Item 6).</div><div class="line">&gt;  ■ Who should have access to the members of your new type?</div><div class="line">This question helps you determine which members are public, which are protected, and which are private. It also helps you de-</div><div class="line">termine which classes and/or functions should be friends, as well as whether it makes sense to nest one class inside another.</div><div class="line">&gt;  ■ What is the “undeclared interface” of your new type? </div><div class="line">What kind of guarantees does it offer with respect to performance, exception safety (see Item 29), and resource usage (e.g., locks and</div><div class="line">dynamic memory)? The guarantees you offer in these areas will impose constraints on your class implementation.</div><div class="line">&gt;  ■ How general is your new type? </div><div class="line">Perhaps you’re not really defining a new type. Perhaps you’re defining a whole family of types. If so,</div><div class="line">you don’t want to define a new class, you want to define a new class template.</div><div class="line">&gt;  ■Is a new type really what you need? If you’re defining a new de-rived class only so you can add functionality to an existing class,perhaps you’d better achieve your goals by simply defining one or more non-member functions or templates.</div><div class="line"></div><div class="line">#### Item20 Prefer pass-by-reference-to-const to pass-by-value</div><div class="line">&gt; ✦ Prefer pass-by-reference-to- const over pass-by-value. It’s typically more efficient and it avoids the slicing problem.</div><div class="line"> ✦ The rule doesn’t apply to built-in types and STL iterator and function object types. For them, pass-by-value is usually appropriate.</div><div class="line"></div><div class="line">#### Item21 Don&apos;t try to return a refernece when you must return an object.$$</div><div class="line">&gt; </div><div class="line">any function returning a reference to a local object is broken as well as a pointer to local object.</div><div class="line">???</div><div class="line"></div><div class="line">#### Item22 Declare dta members private.</div><div class="line">&gt; Declare data members private . It gives clients syntactically uniform access to data, affords fine-grained access control, allows invariants to be enforced, and offers class authors implementation flexibility</div><div class="line"></div><div class="line">#### Item23 Prefer none-member non-friend functions to member functions.</div><div class="line"></div><div class="line">#### Item24 Declare non-member function when type conversion should apply to all parameters.</div><div class="line"></div><div class="line">&gt; make operator* a non-member function, thus allowing compilers to perform implicit type conversions on all arguments</div><div class="line">Whenever you canmavoid friend functions, you should, because, much as in real life,friends are often more trouble than they’re worth</div><div class="line">$ If you need type conversions on all parameters to a function (including the one that would otherwise be pointed to by the this pointer),the function must be a non-member</div><div class="line"></div><div class="line">#### Item25 Consider suport for a non-throwing swap $$$</div><div class="line">* Swap in STL</div></pre></td></tr></table></figure></p>
<p>namespace std<br>{<br>  template<typename t=""><br>  void swap(T&amp; a, T&amp; b)<br>  {<br>    T temp(a);<br>    a = b;<br>    b = temp;<br>  }<br>}</typename></p>
<ul>
<li>swap in pointer the type must support copy constructor and copy assignment<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Not swap the object itself  which is so ineffcient,but swap the pointer.</div></pre></td></tr></table></figure>
</li>
</ul>
<p>template&lt;&gt;<br>void swap<widget>(Widget&amp; a,Widget&amp; b)<br>{<br>    swap(a.pImpl, b.pImpl);<br>}</widget></p>
<ul>
<li>When you want to “partially specialize” a function template, the usual approach is to simply add an overload</li>
</ul>
<h3 id="Implementions"><a href="#Implementions" class="headerlink" title="Implementions"></a>Implementions</h3><h4 id="Item26-Positive-varible-definitions-as-long-as-possible"><a href="#Item26-Positive-varible-definitions-as-long-as-possible" class="headerlink" title="Item26: Positive varible definitions as long as possible"></a>Item26: Positive varible definitions as long as possible</h4><blockquote>
<p>for variable to use in a loop ,define it out of the loop may be more effecient</p>
</blockquote>
<h4 id="Item27-Minimize-casting"><a href="#Item27-Minimize-casting" class="headerlink" title="Item27 Minimize casting"></a>Item27 Minimize casting</h4><p><strong>c++ style casting</strong></p>
<blockquote>
<p>const_cast<t>( expression ): cast const object to non-object<br>dynamic_cast<t>( expression ): safe downcasting<br>reinterpret_cast<t>( expression )<br>static_cast<t>( expression ): implicit concersion<br>✦ Avoid casts whenever practical, especially dynamic_cast s in performance-sensitive code. If a design requires casting, try to develop a cast-free alternative.<br>✦ When casting is necessary, try to hide it inside a function. Clients can then call the function instead of putting casts in their own code.<br>✦ Prefer C++-style casts to old-style casts. They are easier to see, and they are more specific about what they do.</t></t></t></t></p>
</blockquote>
<h4 id="Item28-Avoid-returning-“handles”-to-object-internals"><a href="#Item28-Avoid-returning-“handles”-to-object-internals" class="headerlink" title="Item28 Avoid returning “handles” to object internals"></a>Item28 Avoid returning “handles” to object internals</h4><h4 id="Item29-Strive-for-exception-safe-code"><a href="#Item29-Strive-for-exception-safe-code" class="headerlink" title="Item29 Strive for exception-safe code $$"></a>Item29 Strive for exception-safe code $$</h4><blockquote>
<p>Exception-safe functions leak no resources and allow no data structures to become corrupted, even when exceptions are thrown. Such functions offer the basic, strong, or nothrow guarantees.<br>✦ The strong guarantee can often be implemented via copy-and- swap ,but the strong guarantee is not practical for all functions.<br>✦ A function can usually offer a guarantee no stronger than the weakest guarantee of the functions it calls.</p>
</blockquote>
<h4 id="Item30-Understand-the-ins-and-outs-of-inlineing"><a href="#Item30-Understand-the-ins-and-outs-of-inlineing" class="headerlink" title="Item30 Understand the ins and outs of inlineing   $$"></a>Item30 Understand the ins and outs of inlineing   $$</h4><blockquote>
<p>inline in most c++ programs ia a compile-time activity.<br>inline functions typically be in header files<br>limit most inlineing to small as possible<br>Dont`t declare function template  inlne just because they appear in header files</p>
</blockquote>
<h4 id="Item31-MInimize-complication-dependence-between-files"><a href="#Item31-MInimize-complication-dependence-between-files" class="headerlink" title="Item31 MInimize complication dependence between files"></a>Item31 MInimize complication dependence between files</h4><ol>
<li>Avoid using objects when object reference and pointer will do</li>
<li>Depend on class declaraton instead of class definitions whenever you can</li>
<li>Provide aeperate header files for declarations and definition</li>
</ol>
<h3 id="Inheritence-and-object-oriented-design"><a href="#Inheritence-and-object-oriented-design" class="headerlink" title="Inheritence and object-oriented design"></a>Inheritence and object-oriented design</h3><h4 id="Item32-Make-sure-public-ingeritence-model-“is-a”"><a href="#Item32-Make-sure-public-ingeritence-model-“is-a”" class="headerlink" title="Item32 Make sure public ingeritence model “is a”"></a>Item32 Make sure public ingeritence model “is a”</h4><blockquote>
<p>Everythings that applies to base class must also apply to the derived class ,because every derived class object  is a  base class object.</p>
</blockquote>
<h4 id="Item-33-Avoid-hiding-inheriented-names"><a href="#Item-33-Avoid-hiding-inheriented-names" class="headerlink" title="Item 33 Avoid  hiding inheriented names."></a>Item 33 Avoid  hiding inheriented names.</h4><blockquote>
<p>the scope of a derived class is nested inside its base class`s scope.<br>the same name member funtion in derived class will hide the member funtion with the same name inthe base class ,even if the parameter is different, regaedless of whether the funtions are virtual or non-virtual.</p>
</blockquote>
<ul>
<li>if you use pubic inheritence ,you can`t inherit the overloads.<br>pubic derived allow to override c+ + `s default hiding of inherited names<br><strong>*using base:: functionname;</strong><br>make all things in base named <em>functionname</em> visible in derived class, andd the c++ scope search will find the most appropriate member funtion between tha base class function and derived class member function with the same name</li>
</ul>
<p><strong>Things to Remember</strong></p>
<ul>
<li>Names in derived classes hide names in base classes. Under public inheritance, this is never desirable.</li>
<li>To make hidden names visible again, employ using declarations or forwarding functions.**</li>
</ul>
<h4 id="item34-Differentiate-betwwen-inhertance-of-interface-and-inheritance-of-impletention"><a href="#item34-Differentiate-betwwen-inhertance-of-interface-and-inheritance-of-impletention" class="headerlink" title="item34 Differentiate betwwen inhertance of interface and inheritance of impletention"></a>item34 Differentiate betwwen inhertance of interface and inheritance of impletention</h4><ol>
<li>derived class inherit only the interface(declaration):<code>interface only</code></li>
<li>derived class inherit both the inteface and the implement, but may be overrided the implemention:<code>interface and a default implementation</code></li>
<li>derived class inherit both the inteface and the implement, but without override anything:<code>inteface and a mandatory implementation</code></li>
</ol>
<ul>
<li>pure virtual function<br>$ must be redeclared in any derived class<br>$ derived class inherit a function interface only.</li>
<li>simple virtual function<br>$ derived class inherit the interface<br>$ the implementation derived can be overrided<br>$ if it`s not overrided , call the default implementation in the base class</li>
<li>non-virtual function<br>$ inteface and a mandatory implementation<br><code>Member function interface are always inherited</code></li>
</ul>
<h3 id="Item35-Consider-alternatives-to-virtual-functions"><a href="#Item35-Consider-alternatives-to-virtual-functions" class="headerlink" title="Item35 Consider alternatives to virtual functions."></a>Item35 Consider alternatives to virtual functions.</h3><ol>
<li>Design Pattern : Template Method   call private virtual function through public non-virtual member functions ‘??’</li>
<li><p>The Strategy Pattern via Function Pointers</p>
</li>
<li><p>The Strategy Pattern via tr1::function</p>
</li>
<li><p>The “Classic” Strategy Pattern</p>
</li>
</ol>
<ul>
<li>Use the non-virtual interface idiom (NVI idiom), a form of the Template Method design pattern that wraps public non-virtual member functions around less accessible virtual functions.</li>
<li>Replace virtual functions with function pointer data members, a stripped-down manifestation of the Strategy design pattern.</li>
<li>Replace virtual functions with tr1::function data members, thus allowing use of any callable entity with a signature compatible with what you need. This, too, is a form of the Strategy design pattern.</li>
<li>Replace virtual functions in one hierarchy with virtual functions in another hierarchy. This is the conventional implementation of the Strategy design pattern.</li>
</ul>
<h4 id="Item36-Never-redifine-an-inherited-non-virtual-function"><a href="#Item36-Never-redifine-an-inherited-non-virtual-function" class="headerlink" title="Item36 Never redifine an inherited non_virtual function"></a>Item36 Never redifine an inherited non_virtual function</h4><p><code>non-virtual function is statically bound, but virtual funtion are dynamically bound</code><br>refifine a non-virtual function will make the compiler exhaust.</p>
<h4 id="Item37-Never-redefine-a-function’s-inherited-default-parameter-value"><a href="#Item37-Never-redefine-a-function’s-inherited-default-parameter-value" class="headerlink" title="Item37 Never redefine a function’s inherited default parameter value"></a>Item37 Never redefine a function’s inherited default parameter value</h4><p><code>virtual function are dynamically bound, but default parameter values are statically bound</code><br>all the derived function will inherit the defualt parameter.</p>
<h4 id="Item38-Model-“has-a”-or-“is-implemented-in-terms-of”through-composition"><a href="#Item38-Model-“has-a”-or-“is-implemented-in-terms-of”through-composition" class="headerlink" title="Item38 Model “has a” or “is-implemented -in-terms-of”through composition $"></a>Item38 Model “has a” or “is-implemented -in-terms-of”through composition $</h4><ul>
<li>Composition has meanings completely different from that of public inheritance.</li>
<li>In the application domain, composition means has-a. In the implementation domain, it means is-implemented-in-terms-of.</li>
</ul>
<h4 id="Item-39-Uasage-private-inheritance-judiciously"><a href="#Item-39-Uasage-private-inheritance-judiciously" class="headerlink" title="Item 39 Uasage private inheritance judiciously $$"></a>Item 39 Uasage private inheritance judiciously $$</h4><ol>
<li>can not convert a derived class object into abase class object if the inheritence relationship  id private</li>
<li>members inheriente from the base class will be private member of the derived class.</li>
<li><code>private inheritance means only software implementation</code></li>
</ol>
<ul>
<li>Private inheritance means is-implemented-in-terms of. It’s usually inferior to composition, but it makes sense when a derived class needs access to protected base class members or needs to redefine inherited virtual functions.</li>
<li>Unlike composition, private inheritance can enable the empty base optimization. This can be important for library developers who strive to minimize object sizes.</li>
</ul>
<p>####Item 40 Uasage multiple inheritance judiciously $$</p>
<ul>
<li>Multiple inheritance is more complex than single inheritance. It can lead to new ambiguity issues and to the need for virtual inheritance.</li>
<li>Virtual inheritance imposes costs in size, speed, and complexity of initialization and assignment. It’s most practical when virtual base classes have no data.</li>
<li>Multiple inheritance does have legitimate uses. One scenario involves combining public inheritance from an Interface class with private inheritance from a class that helps with implementation.</li>
</ul>
<h3 id="Templates-and-Generic-Programming"><a href="#Templates-and-Generic-Programming" class="headerlink" title="Templates and Generic Programming $$"></a>Templates and Generic Programming $$</h3><h4 id="Item41-Understand-implicit-interfaces-and-compile-time-polymorphism"><a href="#Item41-Understand-implicit-interfaces-and-compile-time-polymorphism" class="headerlink" title="Item41 Understand implicit interfaces and compile-time polymorphism."></a>Item41 Understand implicit interfaces and compile-time polymorphism.</h4><ul>
<li>Both classes and templates support interfaces and polymorphism.</li>
<li>For classes, interfaces are explicit and centered on function signatures. Polymorphism occurs at runtime through virtual functions.</li>
<li>For template parameters, interfaces are implicit and based on valid expressions. Polymorphism occurs during compilation through template instantiation and function overloading resolution.</li>
</ul>
<h4 id="Item-42-Understand-the-two-meanings-of-typename"><a href="#Item-42-Understand-the-two-meanings-of-typename" class="headerlink" title="Item 42: Understand the two meanings of typename."></a>Item 42: Understand the two meanings of typename.</h4><blockquote>
<p>The general rule is simple: anytime you refer to a nested dependent type name in a template, you must immediately precede it by the word typename .</p>
</blockquote>
<ul>
<li>When declaring template parameters, class and typename are interchangeable.</li>
<li>Use typename to identify nested dependent type names, except in base class lists or as a base class identifier in a member initialization list.</li>
</ul>
<h4 id="Item43-Know-how-to-access-names-in-templatized-base-classes"><a href="#Item43-Know-how-to-access-names-in-templatized-base-classes" class="headerlink" title="Item43: Know how to access names in templatized base classes."></a>Item43: Know how to access names in templatized base classes.</h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/05/C++ Note/" itemprop="url">
                  Note
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-05T20:10:03+08:00" content="2016-08-05">
              2016-08-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://www.tutorialspoint.com/cplusplus/images/cpp-mini-logo.jpg" rel="gallery_cisc5qf0u000sgwlv38qk0p55"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://www.tutorialspoint.com/cplusplus/images/cpp-mini-logo.jpg" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          
            <p><img src="http://www.tutorialspoint.com/cplusplus/cpp_interfaces.htm" alt="C++ Tutorials"><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 100</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">int</span> i,j;</div><div class="line">   srand((<span class="keyword">unsigned</span>)time(<span class="literal">NULL</span>));</div><div class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</div><div class="line">   &#123;</div><div class="line">       j=rand();</div><div class="line">       <span class="built_in">cout</span>&lt;&lt;<span class="string">"随机数：  "</span>&lt;&lt; j%maxn &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>保护成员在派生类（即子类）中是可访问的<br>friend funtion is not belong to any class,and may access any nember of the class which it make firends.<br>inline function: all the funtion defined in the class is default inline function .<br><em>the compiler cooperate the inline function like #define</em><br><strong>this</strong> pointer is the  implicitly arguement of all the menber function.<br>in  any menber funtion ,you can use the <strong>this</strong> pointer to call the object itself.<br>pointer to class is like the pointer to struct ,which can access the member object.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Box *ptrBox;                // Declare pointer to a class.</div><div class="line">   ptrBox = &amp; Box1;// use menber access oprator to call the</div><div class="line">   cout &lt;&lt; &quot;Volume of Box1: &quot; &lt;&lt; ptrBox-&gt;Volume() &lt;&lt; endl;</div></pre></td></tr></table></figure></p>
<p><strong>static</strong> menber and <strong>static</strong> mener function has the only copy int the class,<br>any object of this class not have a copy.but it`s  accessible  to any object of this class.</p>
<blockquote>
<p><strong>inheritance</strong>:<br>class    classname:     access-specifier             base-class<br>         derived-class  (public,private,protected)   defined class</p>
</blockquote>
<p>Access               public     protected      private<br>identical-class       yes           yes          yes<br>inherient-class       yes           yes          no<br>outer-class           yes           no           no</p>
<p><strong>A derived class inherits all base class methods with the following exceptions:</strong></p>
<ol>
<li>Constructors, destructors and copy constructors of the base class.</li>
<li>Overloaded operators of the base class.</li>
<li>The friend functions of the base class.</li>
</ol>
<p>``<br>Type of Inheritance:<br>When deriving a class from a base class, the base class may be inherited through public, protected or private inheritance. The type of inheritance is specified by the access-specifier as explained above.</p>
<p>We hardly use protected or private inheritance, but public inheritance is commonly used. While using different type of inheritance, following rules are applied:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">* Public Inheritance: When deriving a class from a public base class, public members of the base class become public members of the derived class and protected members of the base class become protected members of the derived class. A base class&apos;s private members are never accessible directly from a derived class, but can be accessed through calls to the public and protected members of the base class.</div><div class="line">* Protected Inheritance: When deriving from a protected base class, public and protected members of the base class become protected members of the derived class.</div><div class="line">* Private Inheritance: When deriving from a private base class, public and protected members of the base class become private members of the derived class.</div></pre></td></tr></table></figure></p>
<p>``<br><strong>Multiple Inheritances:</strong></p>
<blockquote>
<p>class derived-class: access baseA, access baseB….</p>
</blockquote>
<p><strong>Overloading function and Overloading operator</strong><br>int the same scope,you can declare some function with the same name,but the parameter list must be different. when the function called ,the compiler will select the most approriate overloaded funtion or operator, which is called overloaded resolution.<br>overloaded funtion character: </p>
<blockquote>
<p>The definition of the function must differ from each other by the types and/or the number of arguments in the argument list.<br><code>the list of operators, which can not be overloaded:    ::    .*   .   ?;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">friend ostream &amp;operator&lt;&lt;( ostream &amp;output, const Distance &amp;D )</div><div class="line">&#123; </div><div class="line">    output &lt;&lt; &quot;F : &quot; &lt;&lt; D.feet &lt;&lt; &quot; I : &quot; &lt;&lt; D.inches;</div><div class="line">    return output;            </div><div class="line">&#125;</div><div class="line"></div><div class="line">friend istream &amp;operator&gt;&gt;( istream  &amp;input, Distance &amp;D )</div><div class="line">&#123; </div><div class="line">    input &gt;&gt; D.feet &gt;&gt; D.inches;</div><div class="line">    return input;            </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>Polymorphism</strong></p>
<blockquote>
<p>polymorphism occurs when there is hierarchy of class and they are related by inheritance.<br>polymorphism in c++ means that a call to a member function will cause a different function to be executed depending on the type of object that invokes the function.</p>
</blockquote>
<p>the call of the member function  is being set once by the compiler as the version defined in the base class,which is called <strong>static resolution</strong> of the function call, or <strong>static linkage</strong> and also sometimes called <strong>early binding</strong><br><strong>Virtual funtion </strong> precede the declaration of menber funtion() in the base class with the keyword <strong>virtual</strong>.<br>virtualed in the base class and each of the child classes has a separate implementation for the function(). This is how polymorphism is generally used.<br><code>A virtual function is a function in a base class that is declared using the keyword virtual. Defining in a base class a virtual function, with another version in a derived class, signals to the compiler that we don&#39;t want static linkage for this function.
What we do want is the selection of the function to be called at any given point in the program to be based on the kind of object for which it is called. This sort of operation is referred to as **dynamic linkage**, or **late binding**.</code></p>
<p><strong>Pure Virtual Functions:</strong></p>
<blockquote>
<p>there is no meaningful definition you could give for the function in the base class.<br><code>virtual type  functionname() = 0;</code><br>The = 0 tells the compiler that the function has no body and above virtual function will be called pure virtual function.</p>
</blockquote>
<p>c++ inteface are implemented by <strong>Abstract class</strong><br>A class is made abstract by declaring at least one of its functions as pure virtual function. using <code>virtual</code> and placing “=0 “ in its declaration.<br>The purpose of an abstract class (often referred to as an ABC) is to provide an appropriate base class from which other classes can inherit. Abstract classes cannot be used to instantiate objects and serves only as an interface.<br><strong>if a subclass of an ABC needs to be instantiated, it has to implement each of the virtual functions, which means that it supports the interface declared by the ABC</strong><br>Classes that can be used to instantiate objects are called <strong>concrete classes</strong><br>.</p>
<blockquote>
<p>Memory in c++ program ia divided into two parts:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">The stack: All variables declared inside the function will take up memory from the stack.</div><div class="line">The heap: This is unused memory of the program and can be used to allocate the memory dynamically when program runs</div><div class="line">&apos;&apos;&apos;</div><div class="line"></div><div class="line">&gt; it is good practice to check if new operator is returning NULL pointer and take appropriate action as below:</div></pre></td></tr></table></figure>
<p>double* pvalue  = NULL;<br>if( !(pvalue  = new double ))<br>{<br>   cout &lt;&lt; “Error: out of memory.” &lt;<endl; exit(1);="" }="" <figure="" class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">Following is the syntax of new operator for a multi-dimensional array as follows:</div></pre></td></tr></table></endl;></p>
<p>int ROW = 2;<br>int COL = 3;<br>double <em>*pvalue  = new double</em> [ROW]; // Allocate memory for rows</p>
<p>// Now allocate memory for columns<br>for(int i = 0; i &lt; COL; i++) {<br>    pvalue[i] = new double[COL];<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">The syntax to release the memory for multi-dimensional will be as follows:</div></pre></td></tr></table></figure></p>
<p>for(int i = 0; i &lt; COL; i++) {<br>    delete[] pvalue[i];<br>}<br>delete [] pvalue;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">**Function Template**</div></pre></td></tr></table></figure></p>
<p>template <class type=""> ret-type func-name(parameter list)<br>{<br>   // body of function<br>}<br>```<br><strong>CGI</strong><br><img src="http://www.runoob.com/wp-content/uploads/2015/05/cgiarch.gif" alt="CGI"></class></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/04/C Primier Plus Overloaded-operation-and-conversion/" itemprop="url">
                  Overloaded operation and conversion
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-04T12:14:29+08:00" content="2016-08-04">
              2016-08-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>规范<br>思考 thinkong<br>改进 improvement<br>说明 specification</p>
<p>When an overloaded operator is a member function, this is bound to the left-hand operand. Member operator functions have one less (explicit)parameter than the number of operands.When an overloaded operator is a member function, this is bound to the left-hand operand. Member operator functions have one less (explicit) parameter than the number of operands.</p>
<blockquote>
<p>deciding whether to make an operator a member or an ordinary nonmember function:<br>• The assignment (=), subscript ([]), call (()), and member access arrow (-&gt;)<br>operators must be defined as members.<br>• The compound-assignment operators ordinarily ought to be members. However,<br>unlike assignment, they are not required to be members.<br>• Operators that change the state of their object or that are closely tied to their<br>given type—such as increment, decrement, and dereference—usually should be<br>members.<br>• Symmetric operators—those that might convert either operand, such as the<br>arithmetic, equality, relational, and bitwise operators—usually should be defined<br>as ordinary nonmember functions.</p>
</blockquote>
<p><code>IO Operators Must Be Nonmember Functions
IO operators usually must be declared as friends</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/03/C Primier Plus Copy-Control/" itemprop="url">
                  Copy Control
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-03T20:02:40+08:00" content="2016-08-03">
              2016-08-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="The-Copy-Constructer"><a href="#The-Copy-Constructer" class="headerlink" title="The Copy Constructer"></a>The Copy Constructer</h4><p>the first parameter is a reference to the class type.<br>usually not be eaplicit.</p>
<blockquote>
<p>the difference between direct initialization and copy initialization.<br>direct initialization :the compiler use ordinary function matching to select the cnstructer that best matchs the arguments we provide;<br>copy initialization : the compiler copy the right oprand into the object being created,converting that operand if necessary.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">string s(dots); // direct initialization</div><div class="line">string s2 = dots; // copy initialization</div></pre></td></tr></table></figure></p>
</blockquote>
<p><strong><br>Copy initialization happens<br>• Define variables using an =<br>• Pass an object as an argument to a parameter of nonreference type<br>• Return an object from a function that has a nonreference return type<br>• Brace initialize the elements in an array or the members of an aggregate class<br>• Some class types also use copy initialization for the objects they allocate.<br><em>insert or push:copy initialize             empalce :   direct initialized</em>
</strong></p>
<h4 id="The-Copy-Assignment-Operater"><a href="#The-Copy-Assignment-Operater" class="headerlink" title="The Copy-Assignment Operater"></a>The Copy-Assignment Operater</h4><p>Assignment operators ordinarily should return a reference to their left-hand operand.<br><code>copy-assignment</code> operator is function named <code>operator=</code>.<br>and is used when assignment occurred.</p>
<h4 id="The-Destructor"><a href="#The-Destructor" class="headerlink" title="The Destructor"></a>The Destructor</h4><p>prefixed by a tilde (~).             no return value and takes no parameters:</p>
<blockquote>
<p>When a Destructor Is Called<br>• Variables are destroyed when they go out of scope.<br>• Members of an object are destroyed when the object of which they are a part is<br>destroyed.<br>• Elements in a container—whether a library container or an array—are destroyed<br>when the container is destroyed.<br>• Dynamically allocated objects are destroyed when the delete operator is<br>applied to a pointer to the object<br>• Temporary objects are destroyed at the end of the full expression in which the<br>temporary was created.</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;initializer_list&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</div><div class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line"><span class="keyword">struct</span> X</div><div class="line">&#123;</div><div class="line">    X()&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"X()"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;;</div><div class="line">    X(<span class="keyword">const</span> X&amp;)&#123; <span class="built_in">cout</span>&lt;&lt;<span class="string">"X(const X&amp;)"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;; <span class="comment">//copy</span></div><div class="line">    X&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> X&amp;) <span class="comment">//copy assignment</span></div><div class="line">    &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"X&amp; operater=(const X&amp;)"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">    &#125;</div><div class="line">    ~X()&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"~X()"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;;  <span class="comment">//destucter</span></div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">const</span> X&amp;rx,X x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;X&gt;vec;</div><div class="line">    vec.reserve(<span class="number">2</span>);</div><div class="line">    vec.push_back(rx);</div><div class="line">    vec.push_back(x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    X* px=<span class="keyword">new</span> X;</div><div class="line">    f(*px,*px);</div><div class="line">    <span class="keyword">delete</span> px;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Classes That Need Destructors Need Copy and Assignment</strong><br><strong>If a class needs a copy constructor, it almost surely needs a copy-assignment operator.</strong><br><strong>= default</strong>:use the defaluter constructer;(only on the default constructor or a copy-control member)<br><strong>= delete</strong>: unable the constructer;</p>
<blockquote>
<p>The Destructor Should Not be a Deleted Member<br>if a class has a data member that cannot be default<br>constructed, copied, assigned, or destroyed, then the corresponding member will be a<br>deleted function.</p>
</blockquote>
<h3 id="Copy-Control-and-Resource-Management"><a href="#Copy-Control-and-Resource-Management" class="headerlink" title="Copy Control and Resource Management"></a>Copy Control and Resource Management</h3><p>two points in assignment operator:<br>• Assignment operators must work correctly if an object is assigned to itself.<br>• Most assignment operators share work with the destructor and copy<br>constructor.</p>
<h4 id="SteVec"><a href="#SteVec" class="headerlink" title="SteVec"></a>SteVec</h4><p>Each StrVec will have three pointers into the space it uses for its elements:<br>• elements, which points to the first element in the allocated memory<br>• first_free, which points just after the last actual element<br>• cap, which points just past the end of the allocated memory</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/28/C Primier Plus Dynamic-Memory /" itemprop="url">
                  Dynamic Memory
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-28T18:30:47+08:00" content="2016-07-28">
              2016-07-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Dynamic-Memory-and-Smart-Pointers"><a href="#Dynamic-Memory-and-Smart-Pointers" class="headerlink" title="Dynamic Memory and Smart Pointers"></a>Dynamic Memory and Smart Pointers</h3><p>shared_ptr:<br>init: make_shared&lt; Type &gt;(args);   shared_ptr&lt; Type &gt;(q); p=q;<br>function :<br>p.unique() if count return 1 truw,else false.<br>p.use_count() return the number of object sharing with p.<br>make_shared. allocates and initializes an object in dynamic memory and returns a shared_ptr that points to that object.<code>shared_ptr&lt;string&gt; p4 = make_shared&lt;string&gt;(10, &#39;9&#39;);</code><br><strong>new</strong> returns a pointer to the object it allocates:<code>int *pi = new int;</code><br>By default, dynamically allocated objects are default initialized, which means that objects of built-in or compound type have undefined value<br>Like any other const, a dynamically allocated const object must be initialized.<br><code>const string *pcs = new const string;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int *p1 = new int; // if allocation fails, new throws std::bad_alloc</div><div class="line">int *p2 = new (nothrow) int; // if allocation fails, new returns a null pointer</div></pre></td></tr></table></figure></p>
<blockquote>
<p><strong>Functions that return pointers (rather than smart pointers) to dynamic memory put a<br>burden on their callers—the caller must remember to delete the memory</strong></p>
</blockquote>
<h2 id="Dynamic-memory-managed-through-built-in-pointers-rather-than-smart-pointers-exists-until-it-is-explicitly-freed"><a href="#Dynamic-memory-managed-through-built-in-pointers-rather-than-smart-pointers-exists-until-it-is-explicitly-freed" class="headerlink" title="Dynamic memory managed through built-in pointers (rather than smart pointers) exists until it is explicitly freed."></a><strong>Dynamic memory managed through built-in pointers (rather than smart pointers) exists until it is explicitly freed.</strong></h2><p><strong>three common problems with using new and delete</strong></p>
<ol>
<li>Forgetting to delete memory. Neglecting to delete dynamic memory is known as a “memory leak,”</li>
<li>Using an object after it has been deleted.</li>
<li>Deleting the same memory twice.</li>
</ol>
<p><strong>dangling pointer</strong>:When we delete a pointer, that pointer becomes invalid.but the pointer continues to hold the address of the (freed) dynamic memory.<br>we cannot implicitly convert a built-in pointer to a smart pointer; we must use<br>the direct form of initialization to initialize a smart pointer<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">shared_ptr&lt;int&gt; p1 = new int(1024); // error: must use direct initialization</div><div class="line">shared_ptr&lt;int&gt; p2(new int(1024)); // ok: uses direct initialization</div></pre></td></tr></table></figure></p>
<p>use <strong>reset</strong> to assign a new pointer to a shared_ptr.</p>
<h2 id="In-particular-classes-that-are-designed-to-be-used-by-both-C-and-C-generally-require-the-user-to-specifically-free-any-resources-that-are-used"><a href="#In-particular-classes-that-are-designed-to-be-used-by-both-C-and-C-generally-require-the-user-to-specifically-free-any-resources-that-are-used" class="headerlink" title="In particular, classes that are designed to be used by both C and C++ generally require the user to specifically free any resources that are used."></a>In particular, classes that are designed to be used by both C and C++ generally require the user to specifically free any resources that are used.</h2><p>unique_ptr:”owns” the object which it points.<br>so it doesn`t support ordinary copy and assignment.<br>but can transfer ownership fron one (nonconst)unique_ptr to another by calling release or set.<br><code>// transfers ownership from p3 to p2
p2.reset(p3.release()); 
// reset deletes the memory to which p2 had pointed</code><br>only one unique_ptr at a time can point to  a given object.<br>unique_ptr destroyed so the object it point to.<br>u.release() :return the pointer u had held and makes u null;<br>u.reset() :deletes the object to which i pointes;<br>u.reset(q) :if the built-in pointer q is supplied ,makes u pointe to that object.<br>u=nullptr; deletes the object to which u points,makes u null;<br>unique_ptr : bind to a pointer<br><strong><a href="http://stackoverflow.com/questions/6876751/differences-between-unique-ptr-and-shared-ptr" target="_blank" rel="external">http://stackoverflow.com/questions/6876751/differences-between-unique-ptr-and-shared-ptr</a></strong></p>
<h3 id="weak-ptr"><a href="#weak-ptr" class="headerlink" title="weak_ptr"></a>weak_ptr</h3><p>not control the lifetime of the object it point to.<br>bind a weak_ptr to a shared_ptr not change the reference count of that shared_ptr.<br><strong>weak</strong>:Once the last shared_ptr pointing to the object goes away, the object itself will be deleted. That object will be deleted even if there are weak_ptrs pointing to it.<br>The <strong>lock</strong> function checks whether the object to which the weak_ptr points still exists. If so, lock returns a shared_ptr to the shared object.</p>
<h3 id="Dynamic-Arrays"><a href="#Dynamic-Arrays" class="headerlink" title="Dynamic Arrays"></a>Dynamic Arrays</h3><p>Classes that allocate dynamic arrays must define their own versions of these operations to manage the associated memory when objects are copied, assigned, and destroyed.<br><code>int *pia = new int[get_size()]; 
// pia points to the first of these ints</code><br>The size inside the brackets must have integral type but need not be a constant.</p>
<blockquote>
<p><strong>Allocating an Array Yields a Pointer to the Element Type</strong></p>
</blockquote>
<p>shared_ptrs provide no direct support for managing a dynamic array. If we want to use a shared_ptr to manage a dynamic array, we must provide our own deleter:<br><code>shared_ptr&lt;int&gt; sp(new int[10], [](int *p) { delete[] p; });
sp.reset(); // uses the lambda we supplied that uses delete[] to free the array</code><br>classes that do not have default constructors cannot be dynamically allocated as an array.<br><strong>allocator</strong>: provides type-aware allocation of raw, unconstructed, memory.<br>We must construct objects in order to use memory returned by<br>allocate. Using unconstructed memory in other ways is undefined.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/28/C Primier Plus Associative containers/" itemprop="url">
                  Associative Containers
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-28T11:35:15+08:00" content="2016-07-28">
              2016-07-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Associative containers support efficient lookup and retrieval by a key.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">        word.erase(std::remove_if(word.begin(), word.end(), ispunct),word.end());</div><div class="line">$   remove_if move container to the end and return a partition iterater, erase the container from partition to the end.</div></pre></td></tr></table></figure></p>
<p>the ordered containers—map, multimap, set, and multiset—the key type must define a way to compare the elements.<br>Callable objects passed to a sort algorithm (§ 10.3.1, p. 386) must meet the same requirements as do the keys in an associative container.<br>To use our own operation, we must define the multiset with two types: the key type,  and the comparison type, which is a function pointer type  that can point to compare function.<br>the data members of pair are public ,These members are named first and second,respectively. We access these members using the normal member access notation.<br>It is essential to remember that the value_type of a map is a pair and that we can change the value but not the key member of that pair.<br>Iterators for sets Are const,the keys in a set are also const.<br><strong>The output of this program is in alphabetical order. When we use an iterator to traverse a map, multimap, set, or multiset, the iterators yield  elements in ascending key order.</strong><br>The insert members (Table 11.4 (overleaf)) add one element or a range of elements.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// four ways to add word to map word_count</div><div class="line">word_count.insert(&#123;word, 1&#125;);</div><div class="line">word_count.insert(make_pair(word, 1));</div><div class="line">word_count.insert(pair&lt;string, size_t&gt;(word, 1));</div><div class="line">word_count.insert(map&lt;string, size_t&gt;::value_type(word, 1));</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Erasing Elements<br>c.erase(k)     remove every element with the key k from c.<br>c.erase(p)     remove the element denoted by the iterater p from c.<br>c.erase(b,e)   remove the element in  the range demoted by b and e and return e.</p>
</blockquote>
<p>The map and unordered_map containers provide the subscript operator and a<br>corresponding at function,We cannot subscript a multimap or an unordered_multimap because there may be more than one value associated with a given key.<br><strong>Subscripting a map behaves quite differently from subscripting an array or vector: Using a key that is not already present adds an element with that key to the map.</strong></p>
<blockquote>
<p>Operations to Find Elements in an Associative Container<br>c.find(k)   return iterator to the first element with the key k or the off-the-end iterator.<br>c.count(k) return the number of elements with key k.<br>c.lower_bound(k) return an iterator to the first element with key not less than k.<br>c.upper_bound(k) return an iterator to the first element with key greater than k.<br>c.equal_range(k) return a pair of iterator denoting the elements with key k,if k is not present, both menbers are c.end().<br>If the key is present, then the first iterator refers to the first instance of the key and the second iterator refers one past the last instance of the key. If no matching element is found, then both the first and second iterators refer to the position where this key can be inserted.</p>
</blockquote>
<p>For the map and unordered_map types,using a subscript has an important side effect: If that key is not already in the map, then subscript inserts an element with that key.<br>When a multimap or multiset has multiple elements of a given key, those elements will be adjacent within the container.</p>
<p><strong>Hash and Unordermap???</strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/26/C Primier Plus Generic-Algorithms/" itemprop="url">
                  C++ Primier Plus Generic Algorithms
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-26T19:10:40+08:00" content="2016-07-26">
              2016-07-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>find algorithm: auto result = find(vec.cbegin(), vec.cend(), val);<br>It returns an iterator to the first element that is equal to that value.<br><strong>use the library begin and end functions to pass a pointer to the first and one past the last elements in ia.</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">int ia[] = &#123;27, 210, 12, 47, 109, 83&#125;;</div><div class="line">int val = 83;</div><div class="line">//int* result = find(begin(ia), end(ia), val);</div><div class="line">//              count(v.cbegin(), v.cend(), value)</div><div class="line">//    int sum = accumulate(vec.cbegin(), vec.cend(), 0);</div><div class="line">The accumulate function takes three arguments. The first two specify a</div><div class="line">range of elements to sum. The third is an initial value for the sum.</div></pre></td></tr></table></figure></p>
<p>equal(roster1.cbegin(), roster1.cend(), roster2.cbegin());<br>fill(vec.begin(), vec.end(), value);<br>fill(vec.begin(), vec.begin() + vec.size()/2, value);<br>fill_n(dest, n, val)<br><strong>Algorithms that write to a destination iterator assume the destination is large enough to hold the number of elements being written.</strong><br>back_inserter takes a reference to a container and returns an insert iterator bound to that container. When we assign through that iterator, the assignment calls push_back to add an element with the given value to the container.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vector&lt;int&gt; vec; // empty vector</div><div class="line">auto it = back_inserter(vec); // assigning through it adds elements to vec</div><div class="line">*it = 42; // vec now has one element with value 42</div></pre></td></tr></table></figure></p>
<p><strong>auto ret = copy(begin(a1), end(a1), a2);</strong><br>The value returned by copy is the (incremented) value of its destination iterator. That is, ret will point just past the last element copied into a2.<br><strong>replace(ilst.begin(), ilst.end(), 0, 42);</strong><br>This call replaces all instances of 0 by 42. If we want to leave the original sequence unchanged, we can call replace_copy.<br><strong>back_inserter is a insert iterator, what iterator adaptor that generates an iterator that uses a container operation to add elements to a given container.<br>the algorithms don’t change the size, but the iterator can change it by using the container operation.</strong><br>Eliminating Duplicates<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">void elimDups(vector&lt;string&gt; &amp;words)</div><div class="line">&#123;</div><div class="line">// sort words alphabetically so we can find the duplicates</div><div class="line">sort(words.begin(), words.end());</div><div class="line">// unique reorders the input range so that each word appears once in the</div><div class="line">// front portion of the range and returns an iterator one past the unique range</div><div class="line">auto end_unique = unique(words.begin(), words.end());</div><div class="line">// erase uses a vector operation to remove the nonunique elements</div><div class="line">words.erase(end_unique, words.end());</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ol>
<li>The library algorithms operate on iterators, not containers. Therefore, an<br>algorithm cannot (directly) add or remove elements.</li>
<li>To actually remove the unused elements, we must use a container operation</li>
</ol>
<p>A lambda expression represents a callable unit of code. It can be thought of as an unnamed, inline function.</p>
<h3 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h3><p><a href="http://www.cnblogs.com/knowledgesea/p/3163725.html" target="_blank" rel="external">http://www.cnblogs.com/knowledgesea/p/3163725.html</a><br><code>[capture list] (parameter list) -&gt; return type { function body }</code><br>The capture list directs the lambda to include information needed to access those variables within the lambda itself.<br>The capture list is used for local nonstatic variables only; lambdas can use local statics and variables declared outside the function directly.<br>When we capture a variable by reference, we must ensure that the variable exists at the time that the lambda executes.<br>By default, a lambda may not change the value of a variable that it copies by value.<br>be able to change the value of a captured variable, we must follow the parameter list with the keyword mutable.</p>
<blockquote>
<p>Insert Iterators<br>• back_inserter (§ 10.2.2, p. 382) creates an iterator that uses push_back.<br>• front_inserter creates an iterator that uses push_front.<br>• inserter creates an iterator that uses insert. This function takes a second argument, which must be an iterator into the given container. Elements are inserted ahead of the element denoted by the given iterator.</p>
</blockquote>
<p><strong>it is not possible to create a reverse iterator from a forward_list or a stream iterator.</strong></p>
<blockquote>
<p>List the five iterator categories and the operations that each supports.<br>• Input iterators : ==, !=, ++, <em>, -&gt;<br>• Output iterators : ++, </em><br>• Forward iterators : ==, !=, ++, <em>, -&gt;<br>• Bidirectional iterators : ==, !=, ++, –, </em>, -&gt;<br>• Random-access iterators : ==, !=, &lt;, &lt;=, &gt;, &gt;=, ++, –, +, +=, -, -=, -(two iterators), <em>, -&gt;, iter[n] == </em> (iter + n)</p>
</blockquote>
<p>The list member versions should be used in preference to the generic algorithms for lists and forward_lists.<br>a crucially important difference between the list-specific and the generic versions is that the list versions change the underlying container.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="TheOneAC" />
          <p class="site-author-name" itemprop="name">TheOneAC</p>
          <p class="site-description motion-element" itemprop="description">生如逆旅  一苇可航</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/TheOneAc" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:scuhss@Gamil.com" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  Email
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.quora.com/profile/SCUhss-%E9%BB%84%E5%B8%85" target="_blank" title="Quora">
                  
                    <i class="fa fa-fw fa-comments"></i>
                  
                  Quora
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/huang-shuai-4" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016.7.14 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TheOneAC</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
