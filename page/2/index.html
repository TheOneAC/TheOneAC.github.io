<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="7989000bfd4e43ea" />










  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Algorithm Git C++" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="生如逆旅  一苇可航">
<meta property="og:type" content="website">
<meta property="og:title" content="TheOneAC">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="TheOneAC">
<meta property="og:description" content="生如逆旅  一苇可航">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TheOneAC">
<meta name="twitter:description" content="生如逆旅  一苇可航">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/page/2/"/>

  <title> TheOneAC </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">TheOneAC</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">init</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/21/DataBase-Concept/" itemprop="url">
                  DataBase Concept
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-21T22:21:47+08:00" content="2016-12-21">
              2016-12-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ER模型转为关系模型转换规则"><a href="#ER模型转为关系模型转换规则" class="headerlink" title="ER模型转为关系模型转换规则"></a>ER模型转为关系模型转换规则</h3><ul>
<li>每一个实体转化为一个关系模式，实体标识符即关系模式的主键</li>
<li>二元关系转换<ul>
<li>实体间联系（1:1）：两个实体类型中转换乘关系模式中任意一个关系模式的属性加入另一个关系模式的键和联系类型属性</li>
<li>实体间联系（1:N）：N端实体烈性转换扯个关系模式中加入1端实体类型的键和联系属性  </li>
<li>实体间联系（M:N）：联系类型转为关系模式，属性为两端实体键加上联系属性，键为两端实体键的组合</li>
</ul>
</li>
<li>最小依赖集<ul>
<li>右边都是单属性</li>
<li>不存在冗余关系（不存在不影响函数依赖集的函数依赖：即存在的函数依赖都对函数依赖集有影响）</li>
<li>左边无冗余属性（不存在左边的真子集可以替代父集，即左边集均是最小集）<br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221201213276-273500741.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221201057011-61333579.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221201235323-177684931.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221201402573-116108252.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221201652198-843968888.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221201931698-358799907.png" alt=""></li>
</ul>
</li>
<li>函数依赖集求解<ul>
<li>右边分裂为单属性</li>
<li>左边消除冗余属性 （消除不影响函数依赖集的函数依赖）</li>
<li>消除冗余依赖（消除可由其它依赖推到得出的函数依赖）<br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221205115776-622863516.png" alt=""></li>
</ul>
</li>
</ul>
<p><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221205230729-1361142249.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221205238573-566283657.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221205247667-1527943028.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221205456542-481286271.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201612/900750-20161221205852401-8697630.png" alt=""></p>
<ul>
<li>分解成2NF：消除非主属性对候选键的局部依赖，拆分候选键</li>
<li>分解成3NF：消除非主属性对候选键的传递依赖，直接关联候选键与非主属性</li>
<li>分解成3NF的算法：<ul>
<li>求出最小依赖集，左部相同依赖合并</li>
<li>每一个依赖关系构成一个模式</li>
<li>在构成模式集中，每个模式都不包含候选键，则吧候选键作为一个模式加入模式集</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/20/DateBase-Concept-查询处理/" itemprop="url">
                  DateBase Concept 查询处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-20T17:27:35+08:00" content="2016-12-20">
              2016-12-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="选择运算"><a href="#选择运算" class="headerlink" title="选择运算"></a>选择运算</h3><ul>
<li>A1：线性搜索，平均代价Br/2，最坏情况Br</li>
<li>A2: 二分搜索，属性有序，代价[logBr]<h4 id="索引选择"><a href="#索引选择" class="headerlink" title="索引选择"></a>索引选择</h4></li>
<li>A3: (主索引，码属性等值比较)可以检索到唯一一条满足条件的记录，代价：B+树树高加上读取一条记录I/O代价</li>
<li>A4: (主索引，非码属性等值比较)主索引可以检索到多条满足条件的记录，且多条记录顺序存储，代价：B+树树高加上具有搜索码值的盘块数</li>
<li>A5: (辅助索引，等值比较)索引字段为码属性直接得到一条记录．索引字段为非码属性，得到多条记录<h4 id="比较选择"><a href="#比较选择" class="headerlink" title="比较选择"></a>比较选择</h4></li>
<li>A6: (主索引，比较)B+树有序主索引</li>
<li>A7: (辅助索引，比较)有序辅助索引，小值从小段开始，大值从　大端开始<h4 id="比较选择-1"><a href="#比较选择-1" class="headerlink" title="比较选择"></a>比较选择</h4></li>
<li>A8: 索引合取（取交）先现则满足一个条件的记录，加入缓冲区，在缓冲区中验证其他条件</li>
<li>A9: (组合所用合取)直接利用合适的符合索引查询</li>
<li>A10: (记录标识符的交)每个条件遍历标记一边，取所有被标记的交际</li>
<li>A11: (记录标识符的并）逐一扫描索引获取满足单个条件的元祖指针，将所有指针集做并集</li>
</ul>
<h3 id="连接运算"><a href="#连接运算" class="headerlink" title="连接运算"></a>连接运算</h3><ul>
<li>嵌套循环（重名属性会出现）</li>
<li>块嵌套循环，每次在块内循环嵌套检查元组匹配，有效减少比较次数</li>
<li>索引嵌套循环连接：嵌套循环连接的内层如果有索引，使用索引代替循环</li>
<li>归并链接：用于自然链接和等值连接<ul>
<li>双有序直接有序归并</li>
<li>单有序，归并后，对索引项进行按地址排序，可实现有序</li>
</ul>
</li>
<li>消除重复: 代价高，明确声明是否去重<ul>
<li>归并/散列可直接在过程中消除重复</li>
</ul>
</li>
<li>集合<ul>
<li>并集：　Hr建立散列索引，将Hs中元组加入到上诉散列索引中，条件是该元组不在散列索引中，散列索引最终即结果</li>
<li>交集：　Hr建立散列索引，对Hs中元组探查散列索引，出现在散列索引的记录放入结果</li>
<li>差集：　Hr建立散列索引，对Hs中元组探查散列索引，出现在散列索引的记录从索引中删除</li>
</ul>
</li>
</ul>
<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><pre><code>-　计算连接法：
    - 左外连接：计算链接，将左集未参与链接集合扩展放入结果
    - 右外连接：计算链接，将右集未参与链接集合扩展放入结果
    - 全外连接：计算链接，将左右集未参与链接集合扩展放入结果
- 嵌套修改法
    - 左外连接：左边外循环，右表内循环，内外匹配加入结果，内部均不匹配的外记录也加入结果
    - 右外连接：右边外循环，左表内循环，内外匹配加入结果，内部均不匹配的外记录也加入结果
- 扩展归并连接获得自然链接和等值全外联
    - 归并完成，将不与另一关系任一记录匹配的记录加入结果
</code></pre><h3 id="表达式计算"><a href="#表达式计算" class="headerlink" title="表达式计算"></a>表达式计算</h3><ul>
<li>实体化：中间结果实体化，供下一层运算，磁盘代价高，双缓冲降低磁盘代价</li>
<li>流水线：生产者驱动流水线，需求驱动流水线</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/19/Thinking after a little Java lab/" itemprop="url">
                  Thinking-after-a-little-Java-project
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-19T20:22:03+08:00" content="2016-12-19">
              2016-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Comments/" itemprop="url" rel="index">
                    <span itemprop="name">Comments</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###　内容说明</p>
<ul>
<li>一项课程作业Java编写Ｓｏｃｋｅｔ长连接监控分布式终端，并将终端状态写入数据库供前端查询</li>
</ul>
<p>####　基础：c++/Posix/APUE/Mysql&amp;sqlite</p>
<p>####　核心内容：Socket/线程/并发/同步</p>
<h4 id="难点：Java语言未系统学习过-Java中JDBC操作数据库未接触过"><a href="#难点：Java语言未系统学习过-Java中JDBC操作数据库未接触过" class="headerlink" title="难点：Java语言未系统学习过,Java中JDBC操作数据库未接触过　"></a>难点：Java语言未系统学习过,Java中JDBC操作数据库未接触过　</h4><ul>
<li>过程:<ul>
<li>心跳包程序理解重写:<ul>
<li>问题与技能：java语言面向对象，Java语言的Socket使用，Java异常基本使用</li>
<li>解决方法：<ul>
<li>熟悉一下Java语法，套用c++面向对象方法（其实面向对象部分基本一样，包括Python的面向对象）</li>
<li>抄代码，理解代码逻辑，（相信每一个关键词，每一行代码都有其意义和功能）学习新语言新工具最快的方式就是使用它</li>
<li>就遇到问题集中问题点查询，避免盲目查询，一次解决一个Bug,多用Google和Stackoverflow(超级高效)</li>
</ul>
</li>
</ul>
</li>
<li>Server端处理<ul>
<li>WatchDog监视新连接</li>
<li>多线程处理各连接内部报文，超时未收到报文，清除连接释放资源</li>
<li>加入机器状态协议消息标识</li>
<li>考虑了多种通信状况的可能，终于理解TCP/IP为什么设计那么多头部和校验了</li>
</ul>
</li>
<li>本地Hashmap缓存消息较少数据库读写次数<ul>
<li>设计之初没考虑状态包对数据库的高频读写更新，后来为了减少数据库读写在本地建立一个最新状态缓存即Hashmap映射集，一般尽量只更新本地状态缓存即Hashmap,必要时读写数据库</li>
<li>hashmap可能不是很好的实现，健壮性欠考虑，考虑用Redis或者sqlite作为本地缓存数据库，效果应该会好些</li>
</ul>
</li>
<li>数据库操作更新<ul>
<li>sql语句嵌入到Java语句中（JDBC），基本的增删改查，封装成了一个查询类</li>
<li>之前学过Mysql和sqlite的基本操作．在Java里是通过是所谓的JDBC（其实还是执行sql语句），这两天看了Python的数据库接口，发现都一样的执行sql语句</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><ul>
<li>好奇Java的线程实现和同步，之前看Posix和APUE的线程章节，一堆的Mutex和lock,感觉Java直接靠关键字synchronized 就搞定了（其实内部还是锁机制）</li>
<li>不管哪种语言<ul>
<li>Socket，一样的bind/connect</li>
<li>线程的同步，一样的加锁互斥等待同步资源共享</li>
<li>线程/进程通信，一样的写进一个＂文件＂，给另一个进程读：信号/信号量（非典型读写），，共享文件/管道（典型读写）</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/12/http权威指南/" itemprop="url">
                  http权威指南
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-12T19:48:36+08:00" content="2016-12-12">
              2016-12-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/HTTP/" itemprop="url" rel="index">
                    <span itemprop="name">HTTP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="第一章-http概述"><a href="#第一章-http概述" class="headerlink" title="第一章 http概述"></a>第一章 http概述</h4><h5 id="1-3-1-媒体类型"><a href="#1-3-1-媒体类型" class="headerlink" title="1.3.1 媒体类型"></a>1.3.1 媒体类型</h5><pre><code>- http为每种web传输的数据格式加上MIME类型数据标签（multipurpose internet mail 
</code></pre><p><img src="http://odfcr7qs4.bkt.clouddn.com/MIME%E7%B1%BB%E5%9E%8B.PNG" alt="MIME类型"></p>
<h5 id="1-4-事务"><a href="#1-4-事务" class="headerlink" title="1.4 事务"></a>1.4 事务</h5><ul>
<li>一个请求 + 一个响应 构成一个事务，通过 格式化的http报文实现<h6 id="1-4-1-方法"><a href="#1-4-1-方法" class="headerlink" title="1.4.1 方法"></a>1.4.1 方法</h6></li>
<li>GET 从服务器向客户端发送命名资源</li>
<li>PUT 将客户端数据存储到命名服务器中</li>
<li>DELETE 从服务器删除命名资源</li>
<li>POST 将客户端信息发送到一个服务器网关应用程序</li>
<li>HEAD 仅发送命名资源响应中的HTTP首部</li>
</ul>
<h6 id="1-4-2-状态码"><a href="#1-4-2-状态码" class="headerlink" title="1.4.2 状态码"></a>1.4.2 状态码</h6><pre><code>- 200 ok 
- 302 redirect
- 404 notfound
</code></pre><p>###第二章 URL与资源</p>
<ul>
<li>在获取用户URL的源端处处理组件不完全字符</li>
</ul>
<h3 id="第三章-HTTP报文"><a href="#第三章-HTTP报文" class="headerlink" title="第三章 HTTP报文"></a>第三章 HTTP报文</h3><h6 id="3-1-报文流"><a href="#3-1-报文流" class="headerlink" title="3.1 报文流"></a>3.1 报文流</h6><ul>
<li>不管是请求还是响应，所有报文向下游流动<h6 id="3-2-报文组成部分"><a href="#3-2-报文组成部分" class="headerlink" title="3.2 报文组成部分"></a>3.2 报文组成部分</h6>  request：<br>  <method> <reuqest-url> <version><br>  <headers><br>  <entity-body><br>  respose:<br>  <version> <status> <reason-phase><br>  <headers><br>  <entity-body><br>####### 3.2.2 起始行</entity-body></headers></reason-phase></status></version></entity-body></headers></version></reuqest-url></method></li>
<li>请求行：请求报文起始行：说明要做什么，响应报文说明：发生了什么</li>
<li>响应行： http 版本，状态码， 状态文本描述</li>
<li>状态码：<br>  <img src="http://odfcr7qs4.bkt.clouddn.com/http%E7%8A%B6%E6%80%81%E7%A0%81.PNG" alt="状态码"><br>####### 3.3.1 方法</li>
<li>安全方法: GET HEAD 不产生动作即不会再拂去其上产生什么结果</li>
<li>HEAD:不获取资源情况下查看资源情况，查看响应状态码，了解对象情况，查看首部，了解资源是否被修改</li>
<li>TRACE：行程最后一站服务器弹回一条响应，携带收到的原始请求报文，方便发送方查看原始报文是否被修改</li>
</ul>
<hr>
<p>状态码与首部：查字典http 口袋书</p>
<h5 id="第四章-连接管理"><a href="#第四章-连接管理" class="headerlink" title="第四章 连接管理"></a>第四章 连接管理</h5><p><img src="http://odfcr7qs4.bkt.clouddn.com/http%E7%9A%84tcp%E4%B8%8Eip%E4%BC%A0%E8%BE%93.PNG" alt="http的tcp/ip连接"></p>
<ul>
<li>tcp 的socket 套接字通信<br><img src="http://odfcr7qs4.bkt.clouddn.com/tcp%E8%BF%9E%E6%8E%A5.PNG" alt="tcp  socket"></li>
</ul>
<p>####### 4.2 HTTP 事务时延</p>
<ul>
<li>url 地址端口映射， tcp连接的建立，端口的释放时延</li>
<li>tcp链接建立的握手机制</li>
<li>tcp慢启动拥塞控制</li>
<li>捎带确认的tcp延迟算法</li>
<li>time_wait 时延和端口耗尽</li>
</ul>
<p>####### 4.4 并行连接</p>
<ul>
<li>并行连接可以加快加载速度，但是不是一定可以加快加载速度</li>
<li>多个对象同时出现在页面，让用户感觉好像加快了加载</li>
</ul>
<p>####### 4.5 持久连接</p>
<ul>
<li>在http设备事务处理结束之后将tcp连接保持在打开状态直到客户端决定关闭</li>
<li>http/1.0 + keep—live 连接<br>  客户端通过包含connection：keep_live首部请求将连接保持在打开状态<br>  服务器允许下一条请求将连接保持在打开状态，将响应中包含相同首部<br>  响应中没有conncetion： keep-live首部，客户端认为服务器不支持keep—live，会在响应之后关闭连接</li>
<li>keep-alive通用首部选项<br>  timeout： 响应首部发送，服务器保持连接活跃的时间<br>  max：     响应首部发送，服务器可以保持的活跃的连接数</li>
</ul>
<p>####### 4.6 管道化连接<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E7%AE%A1%E9%81%93%E5%8C%96%E8%BF%9E%E6%8E%A5%E9%99%90%E5%88%B6.PNG" alt="管道化连接限制"></p>
<p>####### 4.7 连接关闭</p>
<ul>
<li>客户端、服务器、代理都可以在任何时刻关闭一条TCP传输连接</li>
<li>事务多次执行所得结果相同， 则该事物是幂等的（GET\ HEA\ PUT\DELETE\ TRACE\ OPTIONS）</li>
</ul>
<h4 id="第五章-http结构"><a href="#第五章-http结构" class="headerlink" title="第五章 http结构"></a>第五章 http结构</h4><ul>
<li>web服务器动作内容： 建立连接，接受请求，处理请求，访问资源，构建响应，发送响应，记录事物处理过程</li>
<li>新连接添加到web服务器列表中，并驾驶连接的数据传输准备</li>
<li>ip地址解析成主机名用于访问控制和日志记录，但是会降低web事务处理速度</li>
<li>服务器通过ident协议找到发起连接的用户名用于日志记录</li>
<li>报文的内部解析<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E6%8A%A5%E6%96%87%E5%86%85%E9%83%A8%E8%A7%A3%E6%9E%90.PNG" alt="报文内部解析"></li>
</ul>
<h4 id="第六章-代理"><a href="#第六章-代理" class="headerlink" title="第六章 代理"></a>第六章 代理</h4><ul>
<li>代理连接的是使用相同协议的应用程序，网关连接的是使用不同协议的端点</li>
<li>反向代理代替web服务器处理请求必要时向web服务器请求资源</li>
<li>网络交换代理：通过缓存减轻节点拥塞</li>
<li>动态父代理：<ul>
<li>负载均衡：根据父代理工作负载决定选择哪一个父代理</li>
<li>地理位置附近的路由</li>
<li>协议类型路由</li>
<li>基于订购的路由，高性能付费用户<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E4%BB%A3%E7%90%86.PNG" alt="代理"></li>
</ul>
</li>
<li>没有设置科幻段使用代理时，发送部分URL</li>
<li>设置使用客户端代理时，发送完整URL</li>
<li>通用代理服务器应该既支持完整URL，也支持部分URL<br>####### 追踪报文</li>
<li>via首部列出把报文途径的每个节点的有关信息</li>
<li>max-forward 最大转发次数</li>
</ul>
<p>####### 代理认证</p>
<ul>
<li>受限请求到达服务器，服务器返回一个要求范文证书的的407代码里认证请求状态码</li>
<li>用户收到407 响应，尝试从本地数据库寻找证书</li>
<li>获得证书，客户端重新发送请求，在proxy-authorization首部字段提供所要求的的证书</li>
<li>证书有效，代理将院士请求沿着传输链路向下传送，否则发送另外一条407 应答</li>
</ul>
<h4 id="第七章-缓存"><a href="#第七章-缓存" class="headerlink" title="第七章 缓存"></a>第七章 缓存</h4><ul>
<li>缓存：减少冗余数据传输，缓解网络瓶颈，降低对原始服务器的要求，降低时延</li>
<li>http再验证（revalidation）：缓存与服务器一致性验证<ul>
<li>再验证命中：响应http304not modified</li>
<li>再验证未命中：响应普通带内容的http200ok（更新缓存）</li>
<li>对象被删除： 响应404not found 缓存删除相应副本</li>
</ul>
</li>
<li>字节命中率：缓存提供的字节在传输的所有字节中所占的比例</li>
<li>提高文档命中率，阻止通往外部的web事务，有理由降低延迟， 提高字节命中率，阻止字节传向因特网，节省带宽</li>
<li>缓存响应与服务器响应的区分： 缓存响应的date标签早于当前时间，服务器响应的data标签晚于当前时间<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E6%AD%A5%E9%AA%A4.PNG" alt="缓存处理步骤"></li>
</ul>
<h3 id="缓存副本新鲜度"><a href="#缓存副本新鲜度" class="headerlink" title="缓存副本新鲜度"></a>缓存副本新鲜度</h3><h5 id="文档过期"><a href="#文档过期" class="headerlink" title="文档过期"></a>文档过期</h5><ul>
<li>cache-control 首部：max-age 相对第一次生成时间的最大合法生存时间（version 1.1）</li>
<li>Expires 首部： 过期时间    （version 1.0）<blockquote>
<p>服务器再验证： 缓存文档过期，向服务器请求验证文档是否改变，改变则更新文档，为改变则跟新缓存文档首部（date）</p>
</blockquote>
</li>
<li>条件再验证（条件GET）<ul>
<li>if-modified-since： 如果指定日期之后修改，执行GET请求，更新缓存</li>
<li>if-none-match ：文档修改时更新版本标签，实体标签修改后条件首部可执行，实现缓存更新</li>
</ul>
</li>
<li>no-store ：禁止缓存对响应复制</li>
<li>no-cache ：缓存本地，新鲜度验证之前不能提供给客户端</li>
</ul>
<h4 id="第八章-网关隧道及中继"><a href="#第八章-网关隧道及中继" class="headerlink" title="第八章 网关隧道及中继"></a>第八章 网关隧道及中继</h4><ul>
<li>协议网关<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E5%8D%8F%E8%AE%AE%E7%BD%91%E5%85%B3.PNG" alt="协议网关"></li>
<li>服务器协议网关、服务器端安全网关、客户端安全网关、应用程序服务器</li>
<li>web 隧道<blockquote>
<ul>
<li>web隧道用http连接传送非http流量，可以穿过只允许web流量的防火墙<br><img src="http://odfcr7qs4.bkt.clouddn.com/http%E9%9A%A7%E9%81%93.PNG" alt="隧道"></li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="第九章-爬虫"><a href="#第九章-爬虫" class="headerlink" title="第九章 爬虫"></a>第九章 爬虫</h4><ul>
<li>避免环路冗余，url规则化处理</li>
<li>支持host首部以区别虚拟主机上的不同服务器</li>
<li>条件请求（GET）减少页面请求冗余重复</li>
</ul>
<h4 id="第十一章-cookie"><a href="#第十一章-cookie" class="headerlink" title="第十一章 cookie"></a>第十一章 cookie</h4><ul>
<li>会话cookie：记录用户访问站点时的设置和偏好，用户推出浏览器时删除</li>
<li>持久cookie： 硬盘存储，过期时间与临时cookie不同<blockquote>
<p>cookie:服务器为了跟踪用户而产生的id识别码，服务器根据id累计访问者的数据库信息</p>
</blockquote>
</li>
</ul>
<h4 id="第十二章-认证"><a href="#第十二章-认证" class="headerlink" title="第十二章 认证"></a>第十二章 认证</h4><ul>
<li>http质询与响应<blockquote>
<p>服务器收到http请求时，响应一个“认证质询”要求用户提供保密信息说明身份，<br>再次发起请求时，要求附上保密证书（用户名和密码），证书不匹配则再次质询客户端，并产生错误信息</p>
</blockquote>
</li>
<li>摘要认证： 只发送密码摘要，不再明文发送密码本身</li>
<li>摘要认证中使用随机数随机化摘要，随机数由www-authenticate 质询从服务器发送给客户端<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E6%91%98%E8%A6%81%E6%8F%A1%E6%89%8B%E6%9C%BA%E5%88%B6.PNG" alt="摘要握手机制"></li>
</ul>
<h4 id="第十四章-http安全"><a href="#第十四章-http安全" class="headerlink" title="第十四章 http安全"></a>第十四章 http安全</h4><h5 id="https"><a href="#https" class="headerlink" title="https"></a>https</h5><ul>
<li>增加传输安全层，请求和响应全部加密处理<br><img src="http://odfcr7qs4.bkt.clouddn.com/ssl%E6%8F%A1%E6%89%8B.PNG" alt="ssl握手"></li>
</ul>
<h4 id="第十七章-内容协商"><a href="#第十七章-内容协商" class="headerlink" title="第十七章 内容协商"></a>第十七章 内容协商</h4><p><img src="http://odfcr7qs4.bkt.clouddn.com/%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86.PNG" alt="内容协商"></p>
<ul>
<li>服务器驱动协商：http服务器根据accept首部集自动评估发送的响应类型</li>
<li>Apache web服务器内容协商根据type-map类型映射文件，查找变体和先关内容协商首部集<br>  MultiViews指令自动为目录创建type-map文件</li>
<li><p>透明协商：代理了解客户需求，代替客户向服务器请求相应最佳匹配变体类型</p>
<blockquote>
<p>不同变体代表文件类型不一样，必须同时缓存变体和器请求首部、服务器响应首部，代理选择最合适变体方会给用户</p>
</blockquote>
</li>
<li><p>转码：服务器不能满足客户端请求时，将已存在文档转化为用户可用文档</p>
</li>
</ul>
<ol>
<li>格式转换</li>
<li>信息综合</li>
<li>内容注入</li>
</ol>
<ul>
<li>即时转换比静态预生成更加容易实现</li>
</ul>
<h4 id="第二十章-重定向与负载均衡"><a href="#第二十章-重定向与负载均衡" class="headerlink" title="第二十章 重定向与负载均衡"></a>第二十章 重定向与负载均衡</h4><p><img src="http://odfcr7qs4.bkt.clouddn.com/%E9%80%9A%E7%94%A8%E9%87%8D%E5%AE%9A%E5%90%91%E6%96%B9%E6%B3%95.PNG" alt="通用重定向方法"><br><img src="http://odfcr7qs4.bkt.clouddn.com/%E4%BB%A3%E7%90%86%E4%B8%8E%E7%BC%93%E5%AD%98%E9%87%8D%E5%AE%9A%E5%90%91.PNG" alt="代理与缓存重定向"></p>
<ul>
<li><p>http重定向：短的重定向白问发回给客户端，或者找到负载最想内容服务器做负载均衡，重定向服务器回到用户端IP地址</p>
<blockquote>
<p>增加用户时延，原始服务器处理重定向流量，重定向服务器瘫痪导致站点瘫痪</p>
</blockquote>
</li>
<li><p>DNS 重定向：DNS解析返回的ip地址是多个服务器地址的轮转或者负载最小选择或者跳过故障服务器（故障屏蔽）</p>
<blockquote>
<p>DNS缓存失效，同一个主机的多个服务被分支到多个服务器，每次解析得到的DNS地址均不一样</p>
</blockquote>
</li>
<li><p>任播寻址： 多个分离服务器拥有相同IP地址，通过主干路由器的最毒路径路由功能将客户请求发送给最近服务器</p>
</li>
<li><p>IP MAC转发<br><img src="http://odfcr7qs4.bkt.clouddn.com/mac%E8%BD%AC%E5%8F%91.PNG" alt="mac转发"></p>
</li>
<li><p>IP地址转发<br><img src="http://odfcr7qs4.bkt.clouddn.com/ip%E5%9C%B0%E5%9D%80nat%E8%BD%AC%E5%8F%91.PNG" alt="IP地址nat转发"></p>
</li>
<li><p>用户选择配置从代理服务器上获取内容</p>
<blockquote>
<p>代理崩溃时，系统无法联系原始服务器</p>
</blockquote>
</li>
<li><p>记录内容:http方法，http版本，请求资源url，响应状态码，请求与响应报文尺寸，事务开始时间戳，referer首部，user-agent 首部值</p>
</li>
<li>日志格式<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F.PNG" alt="日志格式"></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/12/APUE第五章：标准IO库/" itemprop="url">
                  APUE第五章：标准IO库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-12T19:36:47+08:00" content="2016-12-12">
              2016-12-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/unix/" itemprop="url" rel="index">
                    <span itemprop="name">unix</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="5-2流和file对象"><a href="#5-2流和file对象" class="headerlink" title="5.2流和file对象"></a>5.2流和file对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#include &lt;wchar.h&gt;</div><div class="line">int fwide(FILE *fp, int mode);</div><div class="line">Returns: positive if stream is wide oriented,negative if stream is byte oriented,or 0 if stream has no orientation</div></pre></td></tr></table></figure>
<ul>
<li>mode 负：字节定向，mode 正:宽字节定向， mode 0：不设置流定向但是返回流定向值</li>
</ul>
<h4 id="5-4缓冲"><a href="#5-4缓冲" class="headerlink" title="5.4缓冲"></a>5.4缓冲</h4><pre><code>IO缓冲方式：全缓冲（缓冲区满存入磁盘），行缓冲（收到换行符存入磁盘），不带缓冲
</code></pre><blockquote>
<ol>
<li>标准错误不缓冲</li>
<li>终端设备行缓冲</li>
<li>其他全缓冲</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">void setbuf(FILE *restrict fp, char *restrict buf );</div><div class="line">int setvbuf(FILE *restrict fp, char *restrict buf, int mode,size_t size);</div><div class="line">        Returns: 0 if OK, nonzero on error</div><div class="line">fp: 已打开的文件指针</div><div class="line">buf:未未指定缓冲的流指定缓冲区</div><div class="line">size： 制定的缓冲区大小</div><div class="line">mode：</div><div class="line"> * _IOFBF   全缓冲</div><div class="line"> * _IOLBF   行缓冲</div><div class="line"> * _IONBF   不缓冲</div></pre></td></tr></table></figure>
<h4 id="5-5-打开流"><a href="#5-5-打开流" class="headerlink" title="5.5 打开流"></a>5.5 打开流</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">FILE *fopen(const char *restrict pathname, const char *restrict type);</div><div class="line">FILE *freopen(const char *restrict pathname, const char *restrict type,FILE *restrict fp);</div><div class="line">FILE *fdopen(int fd, const char *type);</div><div class="line">All three return: file pointer if OK, NULL on error</div></pre></td></tr></table></figure>
<ul>
<li>fopen 指定方式读取pathname路径名指定的文件</li>
<li>freopen 指定流上打开指定文件</li>
<li>fdopen 关联一和IO流和一个指定文件指针</li>
</ul>
<h4 id="5-6-读写流"><a href="#5-6-读写流" class="headerlink" title="5.6 读写流"></a>5.6 读写流</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int getc(FILE *fp);</div><div class="line">int fgetc(FILE *fp);</div><div class="line">int getchar(void);</div><div class="line">All three return: next character if OK, EOF on end of file or error</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int ferror(FILE *fp);</div><div class="line">int feof(FILE *fp);</div><div class="line">Both return: nonzero (true) if condition is true, 0 (false) otherwise</div><div class="line">void clearerr(FILE *fp);</div></pre></td></tr></table></figure>
<ul>
<li><p>每个问价对象维护一个出错标志和一个结束标志，clearerr清除这两个标志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int ungetc(int c, FILE *fp);</div><div class="line">        Returns: c if OK, EOF on error</div></pre></td></tr></table></figure>
</li>
<li><p>字符压回流中，顺序与读出相反（暂时写回缓冲区，并未写回磁盘）</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int putc(int c, FILE *fp);</div><div class="line">int fputc(int c, FILE *fp);</div><div class="line">int putchar(int c);</div><div class="line">            All three return: c if OK, EOF on error</div></pre></td></tr></table></figure>
<ul>
<li>行读入<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">char *fgets(char *restrict buf, int n, FILE *restrict fp);</div><div class="line">char *gets(char *buf );</div><div class="line">Both return: buf if OK, NULL on end of file or error</div><div class="line">int fputs(const char *restrict str, FILE *restrict fp);</div><div class="line">int puts(const char *str);</div><div class="line">Both return: non-negative value if OK, EOF on error</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="5-9-二进制IO"><a href="#5-9-二进制IO" class="headerlink" title="5.9 二进制IO"></a>5.9 二进制IO</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">size_t fread(void *restrict ptr, size_t size, size_t nobj,FILE *restrict fp);</div><div class="line">size_t fwrite(const void *restrict ptr, size_t size, size_t nobj,FILE *restrict fp);</div><div class="line">                            Both return: number of objects read or written</div><div class="line">size : object size</div><div class="line">nobj : number of object</div></pre></td></tr></table></figure>
<h4 id="5-10-定位流"><a href="#5-10-定位流" class="headerlink" title="5.10 定位流"></a>5.10 定位流</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">long ftell(FILE *fp);</div><div class="line">                    Returns: current file position indicator if OK, .1L on error</div><div class="line">int fseek(FILE *fp, long offset, int whence);</div><div class="line">                    Returns: 0 if OK, .1 on error</div><div class="line">void rewind(FILE *fp); 流指针返回初始位置</div><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int fgetpos(FILE *restrict fp, fpos_t *restrict pos);</div><div class="line">将文件位置指示器存入pos</div><div class="line">int fsetpos(FILE *fp, const fpos_t *pos);</div><div class="line">将文件位置指示器设置为pos</div><div class="line">            Both return: 0 if OK, nonzero on error</div></pre></td></tr></table></figure>
<h4 id="5-11格式化IO"><a href="#5-11格式化IO" class="headerlink" title="5.11格式化IO"></a>5.11格式化IO</h4><ul>
<li><p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int printf(const char *restrict format, ...);</div><div class="line">int fprintf(FILE *restrict fp, const char *restrict format, ...);</div><div class="line">int dprintf(int fd, const char *restrict format, ...);</div><div class="line">                All three return: number of characters output if OK, negative value if output error</div><div class="line">int sprintf(char *restrict buf, const char *restrict format, ...);</div><div class="line">                Returns: number of characters stored in array if OK, negative value if encoding error</div><div class="line">int snprintf(char *restrict buf, size_t n,const char *restrict format, ...);</div><div class="line">                Returns: number of characters that would have been stored in array</div><div class="line">                    if buffer was large enough, negative value if encoding error</div></pre></td></tr></table></figure>
</li>
<li><p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">int scanf(const char *restrict format, ...);</div><div class="line">int fscanf(FILE *restrict fp, const char *restrict format, ...);</div><div class="line">int sscanf(const char *restrict buf, const char *restrict format, ...);</div><div class="line">            All three return: number of input items assigned,EOF if input error or end of file before any conversion</div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/12/inside-the-c-model/" itemprop="url">
                  inside the c++ object model
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-12T19:31:22+08:00" content="2016-12-12">
              2016-12-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/c/" itemprop="url" rel="index">
                    <span itemprop="name">c++</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="第一章关于对象"><a href="#第一章关于对象" class="headerlink" title="第一章关于对象"></a>第一章关于对象</h3><blockquote>
<ul>
<li>c++在布局和存取时间的额外负担主要有virtual引起<ul>
<li>virtual function：运行期动态绑定</li>
<li>virtual base class ：base class多次出现在派生类中，但只有一个单一而被共享的实体（虚基类）<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210170425588-2144375698.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210171247932-1687988744.png" alt=""></li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li><p>对象模型</p>
<ul>
<li><p>简单模型：每一个地址slot指向一个成员<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210170733604-1534756477.png" alt=""></p>
</li>
<li><p>表格模型：数据表和成员函数表</p>
<ol>
<li>数据表包含数据本身</li>
<li>成员函数表包含指向每个成员函数的指针slot<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210170826447-1547329062.png" alt=""></li>
</ol>
</li>
</ul>
</li>
</ul>
<p><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210204044697-2127663196.png" alt=""></p>
<ul>
<li>虚函数表<ul>
<li>每个class产生一堆指向virtual function的指针，，指针形成一个virtual function table；</li>
<li>每一个class object 添加一个指向virtual function table 的指针vptr</li>
<li>每一个class 关联一个type_info object由虚函数表指出<blockquote>
<p> <code>被指定的object在执行点之前是无法确定类型的，必须通过指针或者引用操作实现</code></p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210171323260-1182604377.png" alt=""></p>
<ul>
<li><p>c++支持多态的方式</p>
<ul>
<li>隐含转化操作，子类指针赋值给父类指针</li>
<li>virtual function</li>
<li>dynamic_cast 和 typeid</li>
<li>基类定义接口，通过virtual function方式，在运行时确定object类型并执行相应操作</li>
</ul>
</li>
<li><p>继承后类及对象的内存布局</p>
<ul>
<li>继承关系<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210205340291-930398176.png" alt=""></li>
<li>内存布局<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170210205407854-1907325966.png" alt=""></li>
<li>虚函数表</li>
</ul>
</li>
</ul>
<h3 id="第二章-构造函数"><a href="#第二章-构造函数" class="headerlink" title="第二章 构造函数"></a>第二章 构造函数</h3><h4 id="2-1-default-constructor-的构建"><a href="#2-1-default-constructor-的构建" class="headerlink" title="2.1 default constructor 的构建"></a>2.1 default constructor 的构建</h4><blockquote>
<ul>
<li>生成default constructor 的要素：<ul>
<li>含有member object 且member object 均有default constructor</li>
<li>class本身无任何constructor，则调用constructor 时编辑器将为class合成一个default constructor</li>
<li>以member objects 在class 声明次序调用各个member object 的 default constructor<br><code>如果derived class 拥有多个constructor 但是没有default constructor，编译器将扩张每一个consturctor，加入每一个必要的基类default constructor,但不会再合成default constructor</code></li>
</ul>
</li>
</ul>
</blockquote>
<h6 id="2-1-1“带有default-constructor-”的base-class-："><a href="#2-1-1“带有default-constructor-”的base-class-：" class="headerlink" title="2.1.1“带有default constructor ”的base class  ："></a>2.1.1“带有default constructor ”的base class  ：</h6><blockquote>
<ul>
<li>自动合成default constructor<pre><code>- class 声明（继承）一个virtual function
- class 派生自一个继承串联，其中至少一个virtual base class
</code></pre></li>
<li>自动合成过程<ul>
<li>产生一个virtual function table，内放class的virtual functions 地址</li>
<li>每一个class object合成一个pointer（vptr）指向class 的virtual function table<br><code>已定义constructor则扩展，未定义则合成default constructor， 保证正确初始化每一个class object 的vptr</code></li>
</ul>
</li>
</ul>
</blockquote>
<h6 id="2-1-2“带有一个virtual-base-class”的class"><a href="#2-1-2“带有一个virtual-base-class”的class" class="headerlink" title="2.1.2“带有一个virtual base class”的class"></a>2.1.2“带有一个virtual base class”的class</h6><blockquote>
<ul>
<li>在derived class object 的每一个virtual base class 中插入一个指向，经由pointer 和reference 存取virtual base class 的操作由这个指针完整（指向同一份内容）<ul>
<li>已定义constructor则扩展，未定义则合成default constructor， 保证允许每一个virtual base class 执行器存取操作</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>summary:合成 implicit nontrivial default constructor<ul>
<li>借用member object 或者 base class 的default constructor</li>
<li>为每一个object 初始化virtual function机制 或者 virtual base机制 </li>
<li>除以上以外，如无任何声明constructor 则不会合成default constructor</li>
</ul>
</li>
<li>合成的default constructor 中只有base class objects 和member class objects 被初始化，其他nonstatic data member，指针，数组都不会自动初始化</li>
<li>解析<br>``<ol>
<li>不是任何class都会合成 deafault constructor，只有member object 或者 base class 有default constructor 时，或者需要初始化virtual function 机制和virtual base class 机制时，合成default constructor</li>
<li>编译器合成的default constructor 并不会明确初始化每一个data member值<br>``<br>####2.2 copy constructor 的构建<blockquote>
<ul>
<li>执行copy constructor的三种情况：<ul>
<li>赋值</li>
<li>作为参数传递</li>
<li>作为返回值</li>
</ul>
</li>
<li>default memberwise initialization<ul>
<li>对于member data 逐一赋值</li>
<li>对于member function 递归调用 memberwise initialization</li>
</ul>
</li>
<li>当class 不展现一个“bitewise copy semantics”(如下四种情况)，需要合成copy constructor</li>
</ul>
</blockquote>
</li>
<li>class 内包含一个member object 且后者（声明或者合成）copy constrctor 时</li>
<li>class 继承一个base class 且后者（声明或者合成）copy constrctor 时</li>
<li>class 声明至少一个virtual function时</li>
<li>class 派生自一个继承串联，其中至少一个virtual base class</li>
</ol>
</li>
</ul>
<h4 id="2-3-program-transformation-semantics"><a href="#2-3-program-transformation-semantics" class="headerlink" title="2.3 program transformation semantics"></a>2.3 program transformation semantics</h4><blockquote>
<ul>
<li>explicit initialization:直接逐位赋值member data<ul>
<li>argument initialization:参数构造临时对象并copy constrcuct</li>
<li>copy construct and 返回引用</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="2-4-member-initialization-list"><a href="#2-4-member-initialization-list" class="headerlink" title="2.4 member initialization list"></a>2.4 member initialization list</h4><blockquote>
<ul>
<li>initial 时：= 操作符以arguement初始化对象时分为三步：1、以arguement 构造一个 临时对象，2、将临时对象copy给目标对象，3、销毁临时对象<ul>
<li>初始化顺序是由members声明次序决定的，不是由member list 顺序决定的；</li>
<li>member list 中初始化先于explicit assignment：即：之后的初始化先于{}内部member data的初始化或者赋值<br><code>X::x(int v):j(v){i = j;}j 的初始化先于i的初始化</code></li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="第三章-the-semantaic-of-data"><a href="#第三章-the-semantaic-of-data" class="headerlink" title="第三章 the semantaic of data"></a>第三章 the semantaic of data</h3><h4 id="3-1-data-member-绑定"><a href="#3-1-data-member-绑定" class="headerlink" title="3.1 data member 绑定"></a>3.1 data member 绑定</h4><pre><code>- 局域绑定
</code></pre><h4 id="3-2-data-member-layout"><a href="#3-2-data-member-layout" class="headerlink" title="3.2 data member layout"></a>3.2 data member layout</h4><pre><code>- 同一access session 按照声明顺序合并，静态成员不存在class 内部
</code></pre><h4 id="3-3-data-member-存取"><a href="#3-3-data-member-存取" class="headerlink" title="3.3 data member 存取"></a>3.3 data member 存取</h4><pre><code>- static data member 
 &gt; 独立于class 之外，不论是继承virtual base class而来或者函数调用得到的static 都是直接存取，通过指针和通过对象存取是一样的
- nonstatic data member
 &gt; 通过指向对象的指针和对象访问一致的，当访问的member data是一个从virtual base class 继承而来的member时，指针访问在运行时才能确定
- 多重继承
![pointer实现：共享虚基类](http://odfcr7qs4.bkt.clouddn.com/IMG_0073.PNG)
![offset实现：共享虚基类](http://odfcr7qs4.bkt.clouddn.com/IMG_0074.PNG)
- 多重继承的数据布局
![](http://images2015.cnblogs.com/blog/900750/201702/900750-20170211192953869-280093158.png)
- 虚拟继承：
    - 指针方式实现
</code></pre><p><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170211194134760-374330191.png" alt=""></p>
<pre><code>-  虚函数表首项偏移指向虚基类 
</code></pre><p><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170211194436619-945911711.png" alt=""></p>
<h4 id="3-6-pointer-to-data-member"><a href="#3-6-pointer-to-data-member" class="headerlink" title="3.6 pointer to data member"></a>3.6 pointer to data member</h4><pre><code>* &amp;Pointer：：z   “取一个nonstaic data member，得到它在class 中的偏移量”
* &amp;origin.z   “取一个class object 的data menber地址， 得到member在内存中的真正地址”
* 继承层次越深，指针代码执行速度越慢
</code></pre><h3 id="第四章-the-semantics-of-function"><a href="#第四章-the-semantics-of-function" class="headerlink" title="第四章 the semantics of function"></a>第四章 the semantics of function</h3><h4 id="4-1-member-调用方式"><a href="#4-1-member-调用方式" class="headerlink" title="4.1 member 调用方式"></a>4.1 member 调用方式</h4><pre><code>* nonstatic member function
  〉 0. 安插this指针   
    1. 对nonstatic member function 经由this 指针存取
    2. 将member function 改写成独一无二（name mangling）的外部函数
  - nonstatic member function 与外部函数的访问性能是一样的
* virtual member function
 &gt;  经由对象调用virtual function 被处理为编译绑定，与nonstatic member function的调用方式一致
* static member function
 &gt;  0. 通过指针或者对象调用静态成员函数都被当做一般函数处理
 〉 1. static member function 没有this 指针，被当做一般函数处理
</code></pre><h3 id="第五章-the-semantics-of-construction-destruction-and-copy"><a href="#第五章-the-semantics-of-construction-destruction-and-copy" class="headerlink" title="第五章  the semantics of construction destruction and  copy"></a>第五章  the semantics of construction destruction and  copy</h3><h4 id="5-1-无继承的对象构造"><a href="#5-1-无继承的对象构造" class="headerlink" title="5.1 无继承的对象构造"></a>5.1 无继承的对象构造</h4><blockquote>
<ol>
<li>bitwise member copy<ol>
<li>ADT class 执行default copy constructor，copy constructor， destructor，但是并不产生相应函数</li>
</ol>
</li>
</ol>
<ul>
<li>构造函数初始化vptr，构造函数不可以虚，构造函数内部调用虚拟函数不能实现多态只能调用本地版本</li>
<li>传值方式传回一个local class object 时最好定义一个copy constructor，以避免被NRV优化<h4 id="5-2-继承体系下的对象构造"><a href="#5-2-继承体系下的对象构造" class="headerlink" title="5.2 继承体系下的对象构造"></a>5.2 继承体系下的对象构造</h4></li>
<li>vptr 初始化语义学<ul>
<li>在class的constructor 或者 destructor 中调用一个virtual function ，调用的必须是本class 中的那个function实体</li>
<li>vptr初始化时间在base class constructor 调用后member initialization list 所列members之前，以保证初始化过程中幻化出完整的基类对象<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170212164307526-1175746780.png" alt=""></li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>只有在默认行为不安全或者不正确是才需要设计一个copy assignment operator<br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170212170452385-811907578.png" alt=""></li>
</ul>
<ol>
<li>dervied class constructor 中所有virtual base class 和base class constructor 被调用</li>
<li>对象vprt被设置，指向相关virtual function table</li>
<li>member initialization list 在constructor 内部展开</li>
<li>执行程序直接赋值代码和生成对象的代码</li>
</ol>
<ul>
<li>不要在虚基类中声明数据，避免copy assignment operator 的不完整性</li>
</ul>
<h4 id="5-5-semantics-of-destructor"><a href="#5-5-semantics-of-destructor" class="headerlink" title="5.5 semantics of destructor"></a>5.5 semantics of destructor</h4><ul>
<li>如果class 未声明destructor 且member object 拥有destructor ，编译器自动合成destructor，否则不合成<blockquote>
<ol>
<li>destructor 函数本身最先执行</li>
<li>拥有destructor 的 member class object按声明顺序相反执行自己的destructor</li>
<li>object 内带vptr 重置，指向响应基类virtual table</li>
<li>直接上层的nonvirtual base class 以其声明的顺序的逆序执行destructor</li>
<li>virtual base class 按照与构造顺序相反的顺序执行destructor</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="第六章-runtime-semantics"><a href="#第六章-runtime-semantics" class="headerlink" title="第六章 runtime semantics"></a>第六章 runtime semantics</h3><h4 id="6-2-new-delete-运算符"><a href="#6-2-new-delete-运算符" class="headerlink" title="6.2 new delete 运算符"></a>6.2 new delete 运算符</h4><pre><code>- new 和delete 底层以malloc 和free 实现
- new 失败，必须在new 内部完成已分配空间的释放
</code></pre><h4 id="6-3-临时对象的处理"><a href="#6-3-临时对象的处理" class="headerlink" title="6.3 临时对象的处理"></a>6.3 临时对象的处理</h4><pre><code>- 临时对象的销毁，必须在完整表达式求值过程的最后，该完整表达式造成临时对象的生成
- 如果临时对象被reference 对象将残留到reference 生命周期结束
</code></pre><h3 id="第七章-on-the-cusp-of-the-object-model"><a href="#第七章-on-the-cusp-of-the-object-model" class="headerlink" title="第七章 on the cusp of the object model"></a>第七章 on the cusp of the object model</h3><h4 id="template"><a href="#template" class="headerlink" title="template"></a>template</h4><pre><code>&gt; member function 只在使用时具现出来
- template class 中所有与类型有关的检验，如果牵涉到template 参数，都将延迟到真正的具现操作发生
</code></pre><h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><pre><code>- exception handing 快速检阅
&gt; 0. throw 子句，发出exception
  1. 多个catch 子句捕获相应类型的exception
  2. try区段处理
- 异常抛出后，控制权转移，函数调用也被推离，在函数堆栈推离前local class objects 的destructor会被调用
</code></pre><p><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170212204416244-2130384324.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170212205157447-528719103.png" alt=""><br>直到找到一个吻合的catch子句，或者直到堆栈被unwound而terminate已被调用</p>
<pre><code>- 异常对象以复制构造方式传入catch子句，处理完成后后local excepton object被销毁，处理终结或者将原异常对象继续抛出
</code></pre><h4 id="RTTI"><a href="#RTTI" class="headerlink" title="RTTI"></a>RTTI</h4><p><img src="http://images2015.cnblogs.com/blog/900750/201702/900750-20170212211550182-979340254.png" alt=""></p>
<pre><code>&gt;  dynamic_cast 通过vptr指向type_info运行时判定类型实现转型，比static_cast代价高但是更安全
&gt;  dynamic_cast 应用于pointer 时，安全转型则直接向下转型，不安全则pointer置0
&gt;  dynamic_cast 应用于reference 时，安全转型则直接向下转型，不安全则返回一个bad_cast exception
&gt;  typeid 返回一个 const reference，类型为type_info,
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/26/leetcode279-Perfect-Squares-basic-dp/" itemprop="url">
                  leetcode279. Perfect Squares(basic dp)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-11-26T22:03:54+08:00" content="2016-11-26">
              2016-11-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/OJ/" itemprop="url" rel="index">
                    <span itemprop="name">OJ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="learn-from-this"><a href="#learn-from-this" class="headerlink" title="learn from this"></a>learn from <a href="https://discuss.leetcode.com/topic/24255/summary-of-4-different-solutions-bfs-dp-static-dp-and-mathematics" target="_blank" rel="external">this</a></h3><ul>
<li><p>DP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">public:</div><div class="line">    int numSquares(int n) &#123;</div><div class="line">        if(n&lt;=0)return 0;</div><div class="line">        int * dp = new int[n+1]();</div><div class="line">        for(int i=1;i&lt;=n;i++)&#123;</div><div class="line">            dp[i]= INT_MAX;</div><div class="line">            for(int j =1;j*j &lt;=i;j++)&#123;</div><div class="line">                int tmp = dp[i-j*j]+1;</div><div class="line">                dp[i]=dp[i]&lt;tmp?dp[i]:tmp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        //for(int i=0;i&lt;=n;i++)cout&lt;&lt; dp[i]&lt;&lt;&apos; &apos;;</div><div class="line">        return dp[n];</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>BFS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">public:</div><div class="line">    int numSquares(int n) &#123;</div><div class="line">        if (n &lt;= 0)return 0;</div><div class="line">        else if(pow((int)sqrt(n),2) == n)return 1;</div><div class="line">        vector&lt;int&gt; perfectSquares;//candinates</div><div class="line">        vector&lt;int&gt; cntPerfectSquares(n);//count_index</div><div class="line">        for (int i = 1; i*i &lt;= n; i++)</div><div class="line">        &#123;</div><div class="line">            perfectSquares.push_back(i*i);</div><div class="line">            cntPerfectSquares[i*i - 1] = 1;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        queue&lt;int&gt; searchQ;</div><div class="line">        for (auto&amp; i : perfectSquares) searchQ.push(i);</div><div class="line">        int currCntPerfectSquares = 1;</div><div class="line">        while (!searchQ.empty())//BFS</div><div class="line">        &#123;</div><div class="line">            currCntPerfectSquares++;</div><div class="line">            </div><div class="line">            int searchQSize = searchQ.size();</div><div class="line">            for (int i = 0; i &lt; searchQSize; i++)</div><div class="line">            &#123;</div><div class="line">                int tmp = searchQ.front();</div><div class="line">                for (auto&amp; j : perfectSquares)</div><div class="line">                &#123;</div><div class="line">                    if (tmp + j == n)return currCntPerfectSquares;</div><div class="line">                    else if ((tmp + j &lt; n) &amp;&amp; (cntPerfectSquares[tmp + j - 1] == 0))</div><div class="line">                    &#123;</div><div class="line">                        cntPerfectSquares[tmp + j - 1] = currCntPerfectSquares;</div><div class="line">                        searchQ.push(tmp + j);</div><div class="line">                    &#125;</div><div class="line">                    else if (tmp + j &gt; n)break;</div><div class="line">                &#125;</div><div class="line">                searchQ.pop();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/26/Object Oriented in C++/" itemprop="url">
                  Object Oriented in C++
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-11-26T22:00:54+08:00" content="2016-11-26">
              2016-11-26
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>定义<code>const</code> 成员函数时,<code>const</code> 位于<code>参数</code>与<code>函数体</code>之间</li>
<li><code>const</code>成员函数只能调用 <code>const</code>成员函数,保证不做修改</li>
<li><code>禁用默认函数</code>(构造,赋值构造等),将<code>默认函数私有化</code>private</li>
<li><code>const</code>成员变量只能<code>参数列表初始化</code></li>
<li>成员函数内部<code>static</code>变量为<code>所有调用该成员函数的对象共有</code></li>
<li><code>this</code>指针<code>不用于static 成员函数</code>中,<code>不能指向const 对象</code></li>
<li>隐藏的父类成员,子类不可直接调用,通过父类共有函数调用</li>
<li><code>派生类同名成员或者函数 屏蔽父类同名成员或者函数</code></li>
<li>为<code>基类设置默认构造函数</code>,方便子类继承</li>
<li>基类声明虚函数后,<code>子类同名</code>自动定义为<code>虚函数</code></li>
<li>构造函数<code>不可以是虚成员函数</code>, <code>析构函数</code>可以</li>
<li><code>重载</code>在<code>编译时期绑定</code>,<code>虚函数(多态)</code> <code>运行期间绑定</code></li>
<li><code>覆盖</code>:多态虚函数函数签名相同,  <code>遮蔽</code>: 共享函数名但签名不同</li>
<li><code>抽象基类确保派生类必须定义某些特定函数（纯虚函数）</code>，否则派生类不可以实例化</li>
<li>抽象基类：<code>包含一个纯虚函数　　virtual    =0;</code></li>
<li><p><code>抽象基类不可实例化</code>，可派生，其<code>派生类必须覆盖全部纯虚函数</code>才可被实例化</p>
</li>
<li><p>重载不改变符号优先级</p>
</li>
<li>除<code>new new[] delete delete[]</code>外以顶层函数重载操作符必须包含一个类对象</li>
<li>操作符<code>[] ()　-&gt;</code>必须以<code>类成员形式重载</code></li>
<li>以成员函数重载二元操作符，只需一个参数，而以顶层函数重载二元操作符时必须两个参数</li>
<li>使用<code>顶层函数重载非对象操作数可出现在操作符左边</code>，<code>类成员函数重载</code>时<code>第一个操作数必须是类对象</code><br>-　<code>praivete member</code> only access by <code>menberfunction and friend funtion.</code></li>
<li><code>protect member</code> can be accessed by <code>menber funtion</code>, <code>friend function</code> and <code>member function of derived class</code></li>
<li>using <code>friend function</code> <code>only</code> in <code>overloading operator</code> as possible as we can</li>
<li>前置自增：　operator++()     后置自增：　operator++(int );</li>
<li><code>new new[]</code>  <code>return type</code> must be <code>void*</code>, the first parameter must be <code>size_t</code></li>
<li><code>delete delete[]</code> return type must be <code>void*</code>, the first parameter must be <code>void *</code> wihch point to the object need to destroied</li>
<li><p>对象不能属于模板类，只能属于模板类实例</p>
</li>
<li><p>duque :双端插入删除效率一致，vector 尾部插入删除效率高</p>
</li>
<li><code>protect</code>成员只能被<code>该类和子类的方法访问</code></li>
<li>父类成员必须定义默认构造函数，否则子类构造前出现编译错误</li>
<li>同一域名空间，函数名相同，签名不同</li>
<li>编译期绑定确定绑定函数，也称为静态多态<h4 id="重写-覆盖-override"><a href="#重写-覆盖-override" class="headerlink" title="重写:覆盖(override)"></a>重写:覆盖(override)</h4></li>
<li>虚函数</li>
<li>子类空间，函数名相同，签名相同<h4 id="重定义：遮蔽（redefine）"><a href="#重定义：遮蔽（redefine）" class="headerlink" title="重定义：遮蔽（redefine）"></a>重定义：遮蔽（redefine）</h4></li>
<li>非虚函数，子类成员函数与父类成员函数同名</li>
<li>虚函数，子类成员函数与父类成员函数同名但不同签名<h4 id="多态：（动态多态）"><a href="#多态：（动态多态）" class="headerlink" title="多态：（动态多态）"></a>多态：（动态多态）</h4></li>
<li>运行期确定绑定对象，也称为动态多态</li>
<li>同签名虚函数构成覆盖</li>
<li>父类指针指向子类对象，调用属于子类的函数</li>
</ul>
<hr>
<ul>
<li>顶层函数重载操作符<ul>
<li>非对象操作数可以出现在操作符左边</li>
<li>使用类成员函数重载是，第一操作数必须是累的对象</li>
<li>顶层函数不能直接访问类私有成员，最好将顶层重载函数设为友元函数，方便直接访问私有数据成员</li>
</ul>
</li>
<li>重载[]:  重载为成员函数，检查下标 ， 返回一个引用适应左值情况</li>
<li>重载（）： 函数调用重载操作符</li>
<li>析构函数出现，必须定义拷贝构造，赋值构造函数</li>
</ul>
<hr>
<ul>
<li>继承下的构造函数：<ul>
<li>先父类按继承顺序构造，再成员按顺序构造，最后派生类构造</li>
<li>每一层只负责调用父类构造函数</li>
<li>基类没有默认构造时，子类构造函数必须显式调用基类的某个构造函数</li>
<li>创建派生类对象时，自动调用基类默认构造函数<ul>
<li>子类有构造函数，基类没有默认构造，创建子类对象时，自动创建基类默认构造函数</li>
<li>子类没有构造函数，基类有默认构造，创建子类对象时，自动调用基类默认构造</li>
<li>子类有构造函数，基类也有默认构造，创建子类对象时，直接调用基类默认构造，或者调用子类显式调用的构造函数</li>
<li>子类基类均有构造，但是基类没有默认构造，创建子类对象时，必须显式调用基类构造函数</li>
</ul>
</li>
</ul>
</li>
<li>继承下的析构函数: 定义实现对派生类新增成员的析构释放</li>
<li>虚基类构造优先于非虚基类的构造</li>
<li>虚基类构造由最派生类调用，其他派生类跳过对虚基类构造的调用</li>
<li>派生类对象和指针可适用于任何基类对象或指针使用的位置（子类可以向上转型）</li>
<li>赋值兼容：子类对象可以赋值或者初始化父类对象，基类指针可以指向子类对象地址</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/25/TCP协议簇/" itemprop="url">
                  TCP协议簇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-10-25T10:41:48+08:00" content="2016-10-25">
              2016-10-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="part-1"><a href="#part-1" class="headerlink" title="part 1"></a>part 1</h4><blockquote>
<h6 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h6><ul>
<li>比特流传输</li>
<li>比特同步、物理拓扑</li>
<li>传输方式：半双工、双工<h6 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h6></li>
<li>节点间帧传输</li>
<li>组帧</li>
<li>加入物理地址</li>
<li>流量控制：发送速度小于接受速度</li>
<li>接入控制：决定链路控制权</li>
<li>确保组网内部节点间传递<h6 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h6></li>
<li>确保源点到终点间的分组交付</li>
<li>路由选择</li>
<li>点点交付<h6 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h6></li>
<li>报文源点到终点的端端交付</li>
<li>分段与重装<h6 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h6></li>
<li>会话控制与同步<h6 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h6></li>
<li>编码转换</li>
<li>信息加密与压缩<h6 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h6></li>
<li>虚拟终端</li>
<li>文件传输与管理</li>
<li>邮件服务和名录服务<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E5%9B%BE2.14.PNG" alt="图2.14"></li>
<li>以太网数据帧长46~1500字节</li>
<li>隐蔽站问题：先发一个请求服务帧（RTS），请求服务时间，接收站广播(CTS)在服务时间内只为请求站服务</li>
<li>中继器：连接同一子网的不同网段</li>
<li>集线器：多端口转发</li>
<li>网桥：工作在链路层，检查MAC地址，过滤帧转发地址</li>
<li>透明网桥： 帧转发，自学习，避免环路</li>
<li>路由器转发会修改物理地址，工作在网络层，<ul>
<li>整个传递过程目的IP地址不变</li>
<li>路由器接受前，目的物理地址是路由器地址</li>
<li>接收后转发，源物理地址是路由器物理地址<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">网络地址：主机位全0</div><div class="line">直接广播地址：主机位全1</div><div class="line">受限广播地址：全1</div><div class="line">这个网络这个主机：全0</div><div class="line">这个网络特定主机：网络位全0</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>路由表</p>
<ul>
<li>目的网络地址：使用特定网络地址转发</li>
<li>下一跳地址：直接交付时为空</li>
<li>接口位置：定义转发接口</li>
<li>目的地址查找成功，ARP映射获得物理地址，帧转发到下一跳<pre><code>        OP 源MAC 源IP 目的MAC 目的IP
ARP请求： 1  *      *            *
ARP响应： 2  *      *     *      *
RARP请求： 3  *
RARP响应： 4  *      *     *      *
</code></pre><img src="http://odfcr7qs4.bkt.clouddn.com/%E5%9B%BE8.10IP%E9%80%89%E9%A1%B9.PNG" alt="图8.10IP选项格式"><br>IP报文总长20~65535，首部长：20~60字节<br>总长以1字为单位，首部 长以4字节为单位<br>分片偏移以8字为单位，相对于原始数据包起点</li>
<li>IP协议字段：1 ICMP 2 IGMP 6 TCP 17：UDP 89 OSPF<br><img src="http://odfcr7qs4.bkt.clouddn.com/%E5%9B%BE9.1ICMP%E6%8A%A5%E6%96%87%E7%B1%BB%E5%9E%8B.PNG" alt="图9.1ICMP报文类型"></li>
<li>差错报文发送给原始数据源</li>
<li>对差错报文不再发送差多报文</li>
<li>对多播报文不发送差错报文</li>
<li>分片数据报的非首片不发送差错报文</li>
<li>特殊地址数据报不发送差错报文<br>每一个因为拥塞丢弃的报文都向源点发送源点抑制报文<br>ICMP协议为IP协议提供：</li>
<li>差错报告、差错控制（重点不可达，超时、源点抑制、参数问题、改变路由）、</li>
<li>主机管理查询（回送送请求和响应、时间戳请求与响应）、</li>
<li>流量控制（源点抑制报文）服务</li>
</ul>
</blockquote>
<p>发送超时报文：</p>
<ul>
<li>（路由器发送）收到的报文TTL字段为0，</li>
<li>（目的主机发送）规定时间内未收到报文的某个分片<br>改变路由报文：路由器向主机发送改变路由报文<br>回送请求和回送回答报文用于测试主机可达性确认网络层通信是否正常<br>时间戳请求与回答：确认往返时间，机器间时间同步<br>ping利用回送请求与响应报文实现<br>traceroute利用超时报文（中间TTL减少至0，路由器发回超时）和终点不可达报文（UDP端口异常）</li>
<li>ICMP 报文类型：查询、成员关系报告、推出报告</li>
<li>成员关系报告需要连续发送两次</li>
<li>成员关系报告：加入组</li>
<li>退出报告：退出一个组</li>
<li>一般性查询：多播路由器周期性发送以监视成员关系</li>
<li>延迟响应：主机等待随机时间，该时间内若有成员关系报告广播，就不再对这个组发送成员关系响应广播<br>携带ICMP报文的IP报文中：协议字段为2，TTL必须是1（局域网内）<br>目的IP地址：查询（多播）：224.0.0.1，成员关系报告（广播）：这个组的多播地址，退出报告（多播）：224.0.0.2<br>####### 数据链路层MAC地址映射：</li>
<li>多播路由器提取D类IP地址的低23位插入以太网多播地址中</li>
<li>D类IP地址组标识共28位，取23位映射以太网多播地址，位未使用，32-&gt;1</li>
<li>以太网多播地址范围：01:00:5E:00:00:00 ~ 01:00:5E:7F:FF:FF</li>
<li>广域网不支持物理多播地址，只能采用隧道技术，封装成单播，到达局域网后解析成多播<br>####### UDP<br>熟知端口号:0~1023,注册端口号：1024~49151，动态端口号：49152~65535<br>UDP长度 = IP长度-IP首部长度<h6 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h6></li>
<li>编号从随机数开始</li>
<li>报文序号：首字节序号</li>
<li>确认号：期望接收的下一个序号</li>
<li>SYN 和SYN+ACK报文不携带数据，消耗一个序号</li>
<li>ACK不携带数据则不消耗序号<br><img src="" alt="12.9"><br><img src="" alt="12.11"></li>
<li>FIN不消耗序号，FIN+ACK只消耗一个序号</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/APUE-Process/" itemprop="url">
                  APUE Process
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-10-10T16:40:03+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Process/" itemprop="url" rel="index">
                    <span itemprop="name">Process</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="chapter-seven"><a href="#chapter-seven" class="headerlink" title="chapter seven"></a>chapter seven</h5><ul>
<li><p>Process tremination</p>
<blockquote>
<ul>
<li>Return from main</li>
<li>Calling exit</li>
<li>Calling _exit or _Exit</li>
<li>Return of the last thread from its start routine</li>
<li>Calling pthread_exit</li>
<li>from the last thread</li>
</ul>
<ul>
<li><code>Abnormal termination occurs in three ways:</code><ul>
<li>Calling abort (Section 10.17)</li>
<li>Receipt of a signal (Section 10.2)</li>
<li>Response of the last thread to a cancellation request</li>
</ul>
</li>
</ul>
</blockquote>
</li>
<li><p>Exit Functions</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdlib.h&gt;</div><div class="line">void exit(int status);</div><div class="line">void _Exit(int status);</div><div class="line">#include &lt;unistd.h&gt;</div><div class="line">void _exit(int status);</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><code>_exit</code> and <code>_Exit</code>, which <code>return</code> to the kernel <code>immediately</code>, and <code>exit</code>, which <code>performs certain cleanup processing</code>and then returns to the kernel.</p>
</blockquote>
<ul>
<li>atexit()<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdlib.h&gt;</div><div class="line">int atexit(void (*func)(void));</div><div class="line">Returns: 0 if OK, nonzero on error</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<ul>
<li>a process can register at least 32 functions that are automatically called by exit. These are called exit handlers and are registered by calling the atexit function.</li>
<li>The exit function calls these functions in reverse order of their registration.</li>
<li>Each function is called as many times as it was registered.</li>
<li>Environment List<br><img src="" alt="Environment"><br>the environment strings are typically stored at the top<br>of a process’s memory space, above the stack.</li>
</ul>
</blockquote>
<h5 id="chapter-eight"><a href="#chapter-eight" class="headerlink" title="chapter eight"></a>chapter eight</h5><ul>
<li>pid_t<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#include &lt;unistd.h&gt;</div><div class="line">pid_t getpid(void);</div><div class="line">Returns: process ID of calling process</div><div class="line">pid_t getppid(void);</div><div class="line">Returns: parent process ID of calling process</div><div class="line">uid_t getuid(void);</div><div class="line">Returns: real user ID of calling process</div><div class="line">uid_t geteuid(void);</div><div class="line">Returns: effective user ID of calling process</div><div class="line">gid_t getgid(void);</div><div class="line">Returns: real group ID of calling process</div><div class="line">gid_t getegid(void);</div><div class="line">Returns: effective group ID of calling process</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="fork"><a href="#fork" class="headerlink" title="fork"></a><code>fork</code></h4><p>-　调用一次，返回两次，子进程返回０，　父进程返回子线程pid<br>-　子进程只保留调用fork 的线程副本<br>-　父进程中所有打开的文件描述符被复制到子进程<br>-　子进程不集成父进程的文件锁，<code>未处理闹钟清除，未处理信号集置空</code><br>-　父进程先于子进程结束，子进程被<code>init</code>进程收养，其父进程ＩＤ为１<br>-　已经结束但未被父进程处理的进程：<code>僵死进程</code></p>
<h4 id="wait-waitpid"><a href="#wait-waitpid" class="headerlink" title="wait waitpid"></a><code>wait</code> <code>waitpid</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#include &lt;sys/wait.h&gt;</div><div class="line">pid_t wait(int *statloc);</div><div class="line">pid_t waitpid(pid_t pid, int *statloc, int options);</div><div class="line">Both return: process ID if OK, 0 (see later), or −1 on error</div></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>wait or waitpid do<br>• <code>Block</code>, if <code>all of its children are still running</code><br>• <code>Return immediately</code> with the termination status of <code>a child</code>, if a child has terminated and is waiting for its termination status to be fetched<br>• <code>Return immediately with an error</code>, if it <code>doesn’t have any child</code> processes</li>
<li>OSIX.1 waitpid function.<br>The interpretation of the pid argument for waitpid depends on its value:</li>
<li>pid == −1  <code>Waits for any child process</code>. In this respect, waitpid is equivalent to wait.</li>
<li>pid &gt; 0 <code>Waits for the child whose process ID equals pid</code>.</li>
<li>pid == 0 Waits for <code>any child</code> whose process <code>group ID</code> equals that of the calling process.</li>
<li>pid &lt; −1 Waits for <code>any child</code> whose process <code>group ID</code> equals the absolute value of pid</li>
</ul>
</blockquote>
<h4 id="exec"><a href="#exec" class="headerlink" title="exec"></a><code>exec</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#include &lt;unistd.h&gt;</div><div class="line">int execl(const char *pathname, const char *arg0, ... /* (char *)0 */ );</div><div class="line">int execv(const char *pathname, char *const argv[]);</div><div class="line">int execle(const char *pathname, const char *arg0, ...</div><div class="line">/* (char *)0, char *const envp[] */ );</div><div class="line">int execve(const char *pathname, char *const argv[], char *const envp[]);</div><div class="line">int execlp(const char *filename, const char *arg0, ... /* (char *)0 */ );</div><div class="line">int execvp(const char *filename, char *const argv[]);</div><div class="line">int fexecve(int fd, char *const argv[], char *const envp[]);</div><div class="line">All seven return: −1 on error, no return on success</div></pre></td></tr></table></figure>
<blockquote>
<p><code>l</code> stands for <code>list</code>, <code>v</code> stands for <code>vector</code>, <code>e</code> stands for <code>environment</code><br>The functions <code>execl, execlp, and execle</code> require <code>each of the
command-line arguments</code> to the new program to be specified as separate arguments. We <code>mark the end of the arguments</code> with <code>a null pointer</code>.<br>For the other four functions (<code>execv, execvp, execve, and fexecve</code>), build an array of pointers to the arguments, and <code>the address of this array</code> pass to these three functions.<br><img src="" alt="exec"></p>
</blockquote>
<h4 id="Process-schedule"><a href="#Process-schedule" class="headerlink" title="Process schedule"></a><code>Process schedule</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#include &lt;unistd.h&gt;</div><div class="line">int nice(int incr);</div><div class="line">#include &lt;sys/resource.h&gt;</div><div class="line">int getpriority(int which, id_t who);</div><div class="line">Returns: new nice value − NZERO if OK, −1 on error</div><div class="line">#include &lt;sys/resource.h&gt;</div><div class="line">int setpriority(int which, id_t who, int value);</div><div class="line">Returns: 0 if OK, −1 on error</div></pre></td></tr></table></figure>
<blockquote>
<p>which : PRO_PROCESS , PRO_GROUP, PRO_USER</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="TheOneAC" />
          <p class="site-author-name" itemprop="name">TheOneAC</p>
          <p class="site-description motion-element" itemprop="description">生如逆旅  一苇可航</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">49</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/TheOneAc" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:scuhss@Gamil.com" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  Email
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.quora.com/profile/SCUhss-%E9%BB%84%E5%B8%85" target="_blank" title="Quora">
                  
                    <i class="fa fa-fw fa-comments"></i>
                  
                  Quora
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/huang-shuai-4" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016.7.14 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TheOneAC</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
